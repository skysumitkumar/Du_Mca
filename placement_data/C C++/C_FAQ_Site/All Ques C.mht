From: <Saved by Windows Internet Explorer 7>
Subject: All Questions
Date: Wed, 19 Apr 2006 19:11:30 +0530
MIME-Version: 1.0
Content-Type: multipart/related;
	type="text/html";
	boundary="----=_NextPart_000_0000_01C663E5.10AE3230"
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180

This is a multi-part message in MIME format.

------=_NextPart_000_0000_01C663E5.10AE3230
Content-Type: text/html;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable
Content-Location: http://c-faq.com/questions.html

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- This collection of hypertext pages is Copyright 1995-2005 by Steve =
Summit. --><!-- Content from the book "C Programming FAQs: Frequently =
Asked Questions" --><!-- (Addison-Wesley, 1995, ISBN 0-201-84519-9) is =
made available here by --><!-- permission of the author and the =
publisher as a service to the community. --><!-- It is intended to =
complement the use of the published text --><!-- and is protected by =
international copyright laws. --><!-- The on-line content may be =
accessed freely for personal use --><!-- but may not be published or =
retransmitted without explicit permission. --><!-- --><!-- this page =
built Sat Dec 24 21:47:45 2005 by faqproc version 2.7 --><!-- from =
source file all.sgml dated Wed Dec 21 15:28:12 2005 --><!-- =
corresponding to FAQ list version 4.0 --><HTML><HEAD><TITLE>All =
Questions</TITLE>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dwindows-1252">
<META content=3D"MSHTML 6.00.5296.0" name=3DGENERATOR></HEAD>
<BODY bgColor=3D#ffffff>&nbsp; <A =
href=3D"http://c-faq.com/index.html"><IMG=20
alt=3Dtop/contents src=3D"http://c-faq.com/images/buttontop.gif"></A> <A =

href=3D"http://c-faq.com/search.html"><IMG alt=3Dsearch=20
src=3D"http://c-faq.com/images/buttonsrch.gif"></A>=20
<HR>

<HR>

<H4>1. Declarations and Initializations</H4>
<P><A href=3D"http://c-faq.com/decl/inttypes.html" =
rel=3Dsubdocument>1.1</A> How=20
should I decide which integer type to use? </P>
<P><A href=3D"http://c-faq.com/decl/exactsizes.html" =
rel=3Dsubdocument>1.2</A> Why=20
aren't the sizes of the standard types precisely defined? </P>
<P><A href=3D"http://c-faq.com/decl/int16.html" =
rel=3Dsubdocument>1.3</A> Since C=20
doesn't define sizes exactly, I've been using typedefs like =
<TT>int16</TT> and=20
<TT>int32</TT>. I can then define these typedefs to be <TT>int</TT>,=20
<TT>short</TT>, <TT>long</TT>, etc. depending on what machine I'm using. =
That=20
should solve everything, right? </P>
<P><A href=3D"http://c-faq.com/decl/octabyte.html" =
rel=3Dsubdocument>1.4</A> What=20
should the 64-bit type be on a machine that can support it? </P>
<P><A href=3D"http://c-faq.com/decl/charstarws.html" =
rel=3Dsubdocument>1.5</A>=20
What's wrong with this declaration? <PRE>char* p1, p2;</PRE>I get errors =
when I try to use <TT>p2</TT>.=20
<P></P>
<P><A href=3D"http://c-faq.com/decl/mimic.html" =
rel=3Dsubdocument>1.6</A> I'm trying=20
to declare a pointer and allocate some space for it, but it's not =
working.=20
What's wrong with this code? <PRE>char *p;
*p =3D malloc(10);</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/decl/decldef.html" =
rel=3Dsubdocument>1.7</A> What's=20
the best way to declare and define global variables and functions? </P>
<P><A href=3D"http://c-faq.com/decl/opaque.html" =
rel=3Dsubdocument>1.8</A> How can I=20
implement opaque (abstract) data types in C? </P>
<P><A href=3D"http://c-faq.com/decl/semiglobal.html" =
rel=3Dsubdocument>1.9</A> How=20
can I make a sort of ``semi-global'' variable, that is, one that's =
private to a=20
few functions spread across a few source files? </P>
<P><A href=3D"http://c-faq.com/decl/static.html" =
rel=3Dsubdocument>1.10</A> Do all=20
declarations for the same <TT>static</TT> function or variable have to =
include=20
the storage class <TT>static</TT>? </P>
<P><A href=3D"http://c-faq.com/decl/extern.html" =
rel=3Dsubdocument>1.11</A> What=20
does <TT>extern</TT> mean in a function declaration? </P>
<P><A href=3D"http://c-faq.com/decl/auto.html" =
rel=3Dsubdocument>1.12</A> What's the=20
<TT>auto</TT> keyword good for? </P>
<P><A href=3D"http://c-faq.com/decl/typedefvsdefine.html" =
rel=3Dsubdocument>1.13</A>=20
What's the difference between using a <TT>typedef</TT> or a =
<TT>#define</TT> for=20
a user-defined type? </P>
<P><A href=3D"http://c-faq.com/decl/selfrefstruct.html" =
rel=3Dsubdocument>1.14</A> I=20
can't seem to define a linked list successfully. I tried <PRE>	typedef =
struct {
		char *item;
		NODEPTR next;
	} *NODEPTR;
</PRE>but the compiler gave me error messages. Can't a structure in C =
contain a=20
pointer to itself?=20
<P></P>
<P><A href=3D"http://c-faq.com/decl/mutrefstructs.html" =
rel=3Dsubdocument>1.15</A>=20
How can I define a pair of mutually referential structures? I tried =
<PRE>	typedef struct {
		int afield;
		BPTR bpointer;
	} *APTR;

	typedef struct {
		int bfield;
		APTR apointer;
	} *BPTR;
</PRE>but the compiler doesn't know about <TT>BPTR</TT> when it is used =
in the=20
first structure declaration.=20
<P></P>
<P><A href=3D"http://c-faq.com/decl/structtypdf.html" =
rel=3Dsubdocument>1.16</A>=20
What's the difference between these two declarations? <PRE>	struct x1 { =
... };
	typedef struct { ... } x2;
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/decl/pfitypedef.html" =
rel=3Dsubdocument>1.17</A> What=20
does <PRE>typedef int (*funcptr)();</PRE>mean?=20
<P></P>
<P><A href=3D"http://c-faq.com/decl/typdfcnst.html" =
rel=3Dsubdocument>1.18</A> I've=20
got the declarations <PRE>	typedef char *charp;
	const charp p;
</PRE>Why is <TT>p</TT> turning out <TT>const</TT>, instead of the =
characters=20
pointed to?=20
<P></P>
<P><A href=3D"http://c-faq.com/decl/constasconst.html" =
rel=3Dsubdocument>1.19</A> I=20
don't understand why I can't use <TT>const</TT> values in initializers =
and array=20
dimensions, as in <PRE>	const int n =3D 5;
	int a[n];
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/decl/constptrconst.html" =
rel=3Dsubdocument>1.20</A>=20
What's the difference between <TT>const&nbsp;char&nbsp;*p</TT>,=20
<TT>char&nbsp;const&nbsp;*p</TT>, and =
<TT>char&nbsp;*&nbsp;const&nbsp;p</TT>?=20
</P>
<P><A href=3D"http://c-faq.com/decl/constparm.html" =
rel=3Dsubdocument>1.20b</A> </P>
<P>What does it mean for a function parameter to be <TT>const</TT>? What =
do the=20
two <TT>const</TT>'s in <PRE>	int f(const * const p)
</PRE>mean?=20
<P></P>
<P><A href=3D"http://c-faq.com/decl/cdecl1.html" =
rel=3Dsubdocument>1.21</A> How do I=20
construct declarations of complicated types such as ``array of N =
pointers to=20
functions returning pointers to functions returning pointers to =
<TT>char</TT>'',=20
or figure out what similarly complicated declarations mean? </P>
<P><A href=3D"http://c-faq.com/decl/recurfuncp.html" =
rel=3Dsubdocument>1.22</A> How=20
can I declare a function that can return a pointer to a function of the =
same=20
type? I'm building a state machine with one function for each state, =
each of=20
which returns a pointer to the function for the next state. But I can't =
find a=20
way to declare the functions--I seem to need a function returning a =
pointer to a=20
function returning a pointer to a function returning a pointer to a =
function...,=20
ad infinitum. </P>
<P><A href=3D"http://c-faq.com/decl/dynarray.html" =
rel=3Dsubdocument>1.23</A> Can I=20
declare a local array (or parameter array) of a size matching a =
passed-in array,=20
or set by another parameter? </P>
<P><A href=3D"http://c-faq.com/decl/extarraysize.html" =
rel=3Dsubdocument>1.24</A> I=20
have an <TT>extern</TT> array which is defined in one file, and used in =
another:=20
<PRE><I>file1.c:</I>			<I>file2.c:</I>

int array[] =3D {1, 2, 3};	extern int array[];
</PRE>Why doesn't <TT>sizeof</TT> work on <TT>array</TT> in =
<TT>file2.c</TT>?=20
<P></P>
<P><A href=3D"http://c-faq.com/decl/implfdecl.html" =
rel=3Dsubdocument>1.25</A> My=20
compiler is complaining about an invalid redeclaration of a function, =
but I only=20
define it once and call it once. </P>
<P><A href=3D"http://c-faq.com/decl/main.html" =
rel=3Dsubdocument>1.25b</A> What's=20
the right declaration for <TT>main</TT>? <BR>Is =
<TT>void&nbsp;main()</TT>=20
correct? </P>
<P><A href=3D"http://c-faq.com/decl/argpromo.html" =
rel=3Dsubdocument>1.26</A> My=20
compiler is complaining about mismatched function prototypes which look =
fine to=20
me. </P>
<P><A href=3D"http://c-faq.com/decl/headerglom.html" =
rel=3Dsubdocument>1.27</A> I'm=20
getting strange syntax errors on the very first declaration in a file, =
but it=20
looks fine. </P>
<P><A href=3D"http://c-faq.com/decl/bigdatastr.html" =
rel=3Dsubdocument>1.28</A> My=20
compiler isn't letting me declare a big array like <PRE>double =
array[256][256];</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/decl/namespace.html" =
rel=3Dsubdocument>1.29</A> How=20
can I determine which identifiers are safe for me to use and which are =
reserved?=20
</P>
<P><A href=3D"http://c-faq.com/decl/initval.html" =
rel=3Dsubdocument>1.30</A> What am=20
I allowed to assume about the initial values of variables and arrays =
which are=20
not explicitly initialized? <BR>If global variables start out as =
``zero'', is=20
that good enough for null pointers and floating-point zeroes? </P>
<P><A href=3D"http://c-faq.com/decl/autoaggrinit.html" =
rel=3Dsubdocument>1.31</A>=20
This code, straight out of a book, isn't compiling: <PRE>int f()
{
	char a[] =3D "Hello, world!";
}
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/decl/fcninit.html" =
rel=3Dsubdocument>1.31b</A> What's=20
wrong with this initialization? <PRE>char *p =3D malloc(10);</PRE>My =
compiler is complaining about an ``invalid=20
initializer'', or something.=20
<P></P>
<P><A href=3D"http://c-faq.com/decl/strlitinit.html" =
rel=3Dsubdocument>1.32</A> What=20
is the difference between these initializations? <PRE>char a[] =3D =
"string literal";
char *p  =3D "string literal";
</PRE>My program crashes if I try to assign a new value to =
<TT>p[i]</TT>.=20
<P></P>
<P><A href=3D"http://c-faq.com/decl/nonstring.html" =
rel=3Dsubdocument>1.33</A> Is=20
<TT>char&nbsp;a[3]&nbsp;=3D&nbsp;"abc";</TT> legal? </P>
<P><A href=3D"http://c-faq.com/decl/ptrfuncinit.html" =
rel=3Dsubdocument>1.34</A> I=20
finally figured out the syntax for declaring pointers to functions, but =
now how=20
do I initialize one? </P>
<P><A href=3D"http://c-faq.com/decl/initunion.html" =
rel=3Dsubdocument>1.35</A> Can I=20
initialize unions? </P>
<HR>

<H4>2. Structures, Unions, and Enumerations</H4>
<P><A href=3D"http://c-faq.com/struct/typedef.html" =
rel=3Dsubdocument>2.1</A> What's=20
the difference between these two declarations? <PRE>	struct x1 { ... };
	typedef struct { ... } x2;
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/struct/impltypedef.html" =
rel=3Dsubdocument>2.2</A>=20
Why doesn't <PRE>struct x { ... };
x thestruct;</PRE>work?=20
<P></P>
<P><A href=3D"http://c-faq.com/struct/selfref.html" =
rel=3Dsubdocument>2.3</A> Can a=20
structure contain a pointer to itself? </P>
<P><A href=3D"http://c-faq.com/struct/opaquetypes.html" =
rel=3Dsubdocument>2.4</A>=20
How can I implement opaque (abstract) data types in C? </P>
<P><A href=3D"http://c-faq.com/struct/oop.html" =
rel=3Dsubdocument>2.4b</A> Is there=20
a good way of simulating OOP-style inheritance, or other OOP features, =
in C?=20
</P>
<P><A href=3D"http://c-faq.com/struct/fcnproto.html" =
rel=3Dsubdocument>2.5</A> Why=20
does the declaration <PRE>extern int f(struct x *p);</PRE>give me an =
obscure warning message about=20
``struct x declared inside parameter list''?=20
<P></P>
<P><A href=3D"http://c-faq.com/struct/structhack.html" =
rel=3Dsubdocument>2.6</A> I=20
came across some code that declared a structure like this: <PRE>struct =
name {
	int namelen;
	char namestr[1];
};
</PRE>and then did some tricky allocation to make the <TT>namestr</TT> =
array act=20
like it had several elements, with the number recorded by =
<TT>namelen</TT>. How=20
does this work? Is it legal or portable?=20
<P></P>
<P><A href=3D"http://c-faq.com/struct/firstclass.html" =
rel=3Dsubdocument>2.7</A> I=20
heard that structures could be assigned to variables and passed to and =
from=20
functions, but K&amp;R1 says not. </P>
<P><A href=3D"http://c-faq.com/struct/compare.html" =
rel=3Dsubdocument>2.8</A> Is=20
there a way to compare structures automatically? </P>
<P><A href=3D"http://c-faq.com/struct/passret.html" =
rel=3Dsubdocument>2.9</A> How=20
are structure passing and returning implemented? </P>
<P><A href=3D"http://c-faq.com/struct/anonstruct.html" =
rel=3Dsubdocument>2.10</A>=20
How can I pass constant values to functions which accept structure =
arguments?=20
How can I create nameless, immediate, constant structure values? </P>
<P><A href=3D"http://c-faq.com/struct/io.html" =
rel=3Dsubdocument>2.11</A> How can I=20
read/write structures from/to data files? </P>
<P><A href=3D"http://c-faq.com/struct/padding.html" =
rel=3Dsubdocument>2.12</A> Why=20
is my compiler leaving holes in structures, wasting space and preventing =

``binary'' I/O to external data files? Can I turn this off, or otherwise =
control=20
the alignment of structure fields? </P>
<P><A href=3D"http://c-faq.com/struct/endpad.html" =
rel=3Dsubdocument>2.13</A> Why=20
does <TT>sizeof</TT> report a larger size than I expect for a structure =
type, as=20
if there were padding at the end? </P>
<P><A href=3D"http://c-faq.com/struct/offsetof.html" =
rel=3Dsubdocument>2.14</A> How=20
can I determine the byte offset of a field within a structure? </P>
<P><A href=3D"http://c-faq.com/struct/fieldnames.html" =
rel=3Dsubdocument>2.15</A>=20
How can I access structure fields by name at run time? </P>
<P><A href=3D"http://c-faq.com/struct/withxref.html" =
rel=3Dsubdocument>2.16</A> Does=20
C have an equivalent to Pascal's <TT>with</TT> statement? </P>
<P><A href=3D"http://c-faq.com/struct/decay.html" =
rel=3Dsubdocument>2.17</A> If an=20
array name acts like a pointer to the base of an array, why isn't the =
same thing=20
true of a structure? </P>
<P><A href=3D"http://c-faq.com/struct/retcrash.html" =
rel=3Dsubdocument>2.18</A> This=20
program works correctly, but it dumps core after it finishes. Why? <PRE>	=
struct list {
		char *item;
		struct list *next;
	}

	/* Here is the main program. */

	main(argc, argv)
	{ ... }
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/struct/union.html" =
rel=3Dsubdocument>2.19</A> What's=20
the difference between a structure and a union, anyway? </P>
<P><A href=3D"http://c-faq.com/struct/initunion.html" =
rel=3Dsubdocument>2.20</A> Can=20
I initialize unions? </P>
<P><A href=3D"http://c-faq.com/struct/taggedunion.html" =
rel=3Dsubdocument>2.21</A>=20
Is there an automatic way to keep track of which field of a union is in =
use?=20
</P>
<P><A href=3D"http://c-faq.com/struct/enumvsdefine.html" =
rel=3Dsubdocument>2.22</A>=20
What's the difference between an enumeration and a set of preprocessor=20
<TT>#define</TT>s? </P>
<P><A href=3D"http://c-faq.com/struct/enumport.html" =
rel=3Dsubdocument>2.23</A> Are=20
enumerations really portable? <BR>Aren't they Pascalish? <BR></P>
<P><A href=3D"http://c-faq.com/struct/enumprint.html" =
rel=3Dsubdocument>2.24</A> Is=20
there an easy way to print enumeration values symbolically? </P>
<P><A href=3D"http://c-faq.com/struct/bitfield0.html" =
rel=3Dsubdocument>2.25</A> I=20
came across some structure declarations with colons and numbers next to =
certain=20
fields, like this: <PRE>struct record {
	char *name;
	int refcount : 4;
	unsigned dirty : 1;
};
</PRE>What gives?=20
<P></P>
<P><A href=3D"http://c-faq.com/struct/bitfields.html" =
rel=3Dsubdocument>2.26</A> Why=20
do people use explicit masks and bit-twiddling code so much, instead of=20
declaring bit-fields? </P>
<HR>

<H4>3. Expressions</H4>
<P><A href=3D"http://c-faq.com/expr/evalorder1.html" =
rel=3Dsubdocument>3.1</A> Why=20
doesn't this code: <PRE>a[i] =3D i++;</PRE>work?=20
<P></P>
<P><A href=3D"http://c-faq.com/expr/evalorder2.html" =
rel=3Dsubdocument>3.2</A> Under=20
my compiler, the code <PRE>int i&nbsp;=3D&nbsp;7;
printf("%d\n",&nbsp;i++&nbsp;*&nbsp;i++);</PRE>prints 49. Regardless of =
the=20
order of evaluation, shouldn't it print 56?=20
<P></P>
<P><A href=3D"http://c-faq.com/expr/ieqiplusplus.html" =
rel=3Dsubdocument>3.3</A>=20
I've experimented with the code <PRE>int i&nbsp;=3D&nbsp;3;
i&nbsp;=3D&nbsp;i++;</PRE>on several compilers. Some gave <TT>i</TT> the =
value 3,=20
and some gave 4. Which compiler is correct?=20
<P></P>
<P><A href=3D"http://c-faq.com/expr/xorswapexpr.html" =
rel=3Dsubdocument>3.3b</A>=20
Here's a slick expression: =
<PRE>a&nbsp;^=3D&nbsp;b&nbsp;^=3D&nbsp;a&nbsp;^=3D&nbsp;b</PRE>It swaps =
<TT>a</TT> and=20
<TT>b</TT> without using a temporary.=20
<P></P>
<P><A href=3D"http://c-faq.com/expr/precvsooe.html" =
rel=3Dsubdocument>3.4</A> Can I=20
use explicit parentheses to force the order of evaluation I want, and =
control=20
these side effects? Even if I don't, doesn't precedence dictate it? </P>
<P><A href=3D"http://c-faq.com/expr/seqpointops.html" =
rel=3Dsubdocument>3.5</A> But=20
what about the <TT>&amp;&amp;</TT> and <TT>||</TT> operators? <BR>I see =
code=20
like=20
``<TT>while((c&nbsp;=3D&nbsp;getchar())&nbsp;!=3D&nbsp;EOF&nbsp;&amp;&amp=
;&nbsp;c&nbsp;!=3D&nbsp;'\n')</TT>''=20
... </P>
<P><A href=3D"http://c-faq.com/expr/shortcircuit.html" =
rel=3Dsubdocument>3.6</A> Is=20
it safe to assume that the right-hand side of the <TT>&amp;&amp;</TT> =
and=20
<TT>||</TT> operators won't be evaluated if the left-hand side =
determines the=20
outcome? </P>
<P><A href=3D"http://c-faq.com/expr/comma.html" =
rel=3Dsubdocument>3.7</A> Why did =
<PRE>printf("%d&nbsp;%d",&nbsp;f1(),&nbsp;f2());</PRE>call <TT>f2</TT> =
first? I=20
thought the comma operator guaranteed left-to-right evaluation.=20
<P></P>
<P><A href=3D"http://c-faq.com/expr/seqpoints.html" =
rel=3Dsubdocument>3.8</A> How=20
can I understand complex expressions like the ones in this section, and =
avoid=20
writing undefined ones? What's a ``sequence point''? </P>
<P><A href=3D"http://c-faq.com/expr/evalorder4.html" =
rel=3Dsubdocument>3.9</A> So if=20
I write <PRE>a[i]&nbsp;=3D&nbsp;i++;</PRE>and I don't care which cell of =
<TT>a[]</TT> gets=20
written to, the code is fine, and <TT>i</TT> gets incremented by one, =
right?=20
<P></P>
<P><A href=3D"http://c-faq.com/expr/experiment.html" =
rel=3Dsubdocument>3.10a</A>=20
People keep saying that the behavior of <TT>i&nbsp;=3D&nbsp;i++</TT> is =
undefined,=20
but I just tried it on an ANSI-conforming compiler, and got the results =
I=20
expected. </P>
<P><A href=3D"http://c-faq.com/expr/expec0.html" =
rel=3Dsubdocument>3.10b</A> People=20
told me that if I evaluated an undefined expression, or accessed an=20
uninitialized variable, I'd get a random, garbage value. But I tried it, =
and got=20
<EM>zero</EM>. What's up with that? </P>
<P><A href=3D"http://c-faq.com/expr/confused.html" =
rel=3Dsubdocument>3.11</A> How=20
can I avoid these undefined evaluation order difficulties if I don't =
feel like=20
learning the complicated rules? </P>
<P><A href=3D"http://c-faq.com/expr/prevspost.html" =
rel=3Dsubdocument>3.12a</A>=20
What's the difference between <TT>++i</TT> and <TT>i++</TT>? </P>
<P><A href=3D"http://c-faq.com/expr/plusplus.html" =
rel=3Dsubdocument>3.12b</A> If=20
I'm not using the value of the expression, should I use <TT>++i</TT> or=20
<TT>i++</TT> to increment a variable? </P>
<P><A href=3D"http://c-faq.com/expr/transitivity.html" =
rel=3Dsubdocument>3.13</A> I=20
need to check whether one number lies between two others. Why doesn't =
<PRE>if(a &lt; b &lt; c)</PRE>work?=20
<P></P>
<P><A href=3D"http://c-faq.com/expr/intoverflow1.html" =
rel=3Dsubdocument>3.14</A>=20
Why doesn't the code =
<PRE>int&nbsp;a&nbsp;=3D&nbsp;1000,&nbsp;b&nbsp;=3D&nbsp;1000;
long&nbsp;int&nbsp;c&nbsp;=3D&nbsp;a&nbsp;*&nbsp;b;</PRE>work?=20
<P></P>
<P><A href=3D"http://c-faq.com/expr/intovf3.html" =
rel=3Dsubdocument>3.14b</A> How=20
can I ensure that integer arithmetic doesn't overflow? </P>
<P><A href=3D"http://c-faq.com/expr/truncation1.html" =
rel=3Dsubdocument>3.15</A> Why=20
does the code <PRE>double degC, degF;
degC =3D 5 / 9 * (degF - 32);</PRE>keep giving me 0?=20
<P></P>
<P><A href=3D"http://c-faq.com/expr/qcolonlhs.html" =
rel=3Dsubdocument>3.16</A> I=20
have a complicated expression which I have to assign to one of two =
variables,=20
depending on a condition. Can I use code like this? <PRE>	((condition) ? =
a : b) =3D complicated_expression;
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/expr/ternprec.html" =
rel=3Dsubdocument>3.17</A> I have=20
some code containing expressions like <PRE>a ? b =3D c : d</PRE>and some =
compilers are accepting it but some are not.=20
<P></P>
<P><A href=3D"http://c-faq.com/expr/unswarn.html" =
rel=3Dsubdocument>3.18</A> What=20
does the warning ``semantics of `<TT>&gt;</TT>' change in ANSI C'' mean? =
</P>
<P><A href=3D"http://c-faq.com/expr/preservingrules.html" =
rel=3Dsubdocument>3.19</A>=20
What's the difference between the ``unsigned preserving'' and ``value=20
preserving'' rules? </P>
<HR>

<H4>4. Pointers</H4>
<P><A href=3D"http://c-faq.com/ptrs/goodfor.html" =
rel=3Dsubdocument>4.1</A> What are=20
pointers really good for, anyway? </P>
<P><A href=3D"http://c-faq.com/ptrs/mimic.html" =
rel=3Dsubdocument>4.2</A> I'm trying=20
to declare a pointer and allocate some space for it, but it's not =
working.=20
What's wrong with this code? <PRE>char *p;
*p =3D malloc(10);</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/ptrs/unopprec2.html" =
rel=3Dsubdocument>4.3</A> Does=20
<TT>*p++</TT> increment <TT>p</TT>, or what it points to? </P>
<P><A href=3D"http://c-faq.com/ptrs/explscale.html" =
rel=3Dsubdocument>4.4</A> I'm=20
trying to use pointers to manipulate an array of <TT>int</TT>s. What's =
wrong=20
with this code? <PRE>	int array[5], i, *ip;
	for(i =3D 0; i &lt; 5; i++) array[i] =3D i;
	ip =3D array;
	printf("%d\n", *(ip + 3 * sizeof(int)));
</PRE>I expected the last line to print 3, but it printed garbage.=20
<P></P>
<P><A href=3D"http://c-faq.com/ptrs/castincr.html" =
rel=3Dsubdocument>4.5</A> I have=20
a <TT>char&nbsp;*</TT> pointer that happens to point to some =
<TT>int</TT>s, and=20
I want to step it over them. Why doesn't <PRE>((int *)p)++;</PRE>work?=20
<P></P>
<P><A href=3D"http://c-faq.com/ptrs/voidparith.html" =
rel=3Dsubdocument>4.6</A> Why=20
can't I perform arithmetic on a <TT>void&nbsp;*</TT> pointer? </P>
<P><A href=3D"http://c-faq.com/ptrs/align.html" =
rel=3Dsubdocument>4.7</A> I've got=20
some code that's trying to unpack external structures, but it's crashing =
with a=20
message about an ``unaligned access.'' What does this mean? </P>
<P><A href=3D"http://c-faq.com/ptrs/passptrinit.html" =
rel=3Dsubdocument>4.8</A> I=20
have a function which accepts, and is supposed to initialize, a pointer: =
<PRE>	void f(int *ip)
	{
		static int dummy =3D 5;
		ip =3D &amp;dummy;
	}
</PRE>But when I call it like this: <PRE>	int *ip;
	f(ip);
</PRE>the pointer in the caller remains unchanged.=20
<P></P>
<P><A href=3D"http://c-faq.com/ptrs/genericpp.html" =
rel=3Dsubdocument>4.9</A>=20
Suppose I want to write a function that takes a generic pointer as an =
argument=20
and I want to simulate passing it by reference. Can I give the formal =
parameter=20
type <TT>void&nbsp;**</TT>, and do something like this? <PRE>	void =
f(void **);
	double *dp;
	f((void **)&amp;dp);
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/ptrs/refconst.html" =
rel=3Dsubdocument>4.10</A> I have=20
a function <PRE>	extern int f(int *);
</PRE>which accepts a pointer to an <TT>int</TT>. How can I pass a =
constant by=20
reference? A call like <PRE>	f(&amp;5);
</PRE>doesn't seem to work.=20
<P></P>
<P><A href=3D"http://c-faq.com/ptrs/passbyref.html" =
rel=3Dsubdocument>4.11</A> Does=20
C even have ``pass by reference''? </P>
<P><A href=3D"http://c-faq.com/ptrs/funccall.html" =
rel=3Dsubdocument>4.12</A> I've=20
seen different syntax used for calling functions via pointers. What's =
the story?=20
</P>
<P><A href=3D"http://c-faq.com/ptrs/generic.html" =
rel=3Dsubdocument>4.13</A> What's=20
the total generic pointer type? My compiler complained when I tried to =
stuff=20
function pointers into a <TT>void&nbsp;*</TT>. </P>
<P><A href=3D"http://c-faq.com/ptrs/int2ptr.html" =
rel=3Dsubdocument>4.14</A> How are=20
integers converted to and from pointers? Can I temporarily stuff an =
integer into=20
a pointer, or vice versa? </P>
<P><A href=3D"http://c-faq.com/ptrs/int2charp.html" =
rel=3Dsubdocument>4.15</A> How=20
do I convert an <TT>int</TT> to a <TT>char&nbsp;*</TT>? I tried a cast, =
but it's=20
not working. </P>
<P><A href=3D"http://c-faq.com/ptrs/charstarws3.html" =
rel=3Dsubdocument>4.16</A>=20
What's wrong with this declaration? <PRE>char* p1, p2;</PRE>I get errors =
when I try to use <TT>p2</TT>.=20
<P></P>
<P><A href=3D"http://c-faq.com/ptrs/nearfar2.html" =
rel=3Dsubdocument>4.17</A> What=20
are ``near'' and ``far'' pointers? </P>
<HR>

<H4>5. Null Pointers</H4>
<P><A href=3D"http://c-faq.com/null/null1.html" =
rel=3Dsubdocument>5.1</A> What is=20
this infamous null pointer, anyway? </P>
<P><A href=3D"http://c-faq.com/null/null2.html" =
rel=3Dsubdocument>5.2</A> How do I=20
get a null pointer in my programs? </P>
<P><A href=3D"http://c-faq.com/null/ptrtest.html" =
rel=3Dsubdocument>5.3</A> Is the=20
abbreviated pointer comparison ``<TT>if(p)</TT>'' to test for non-null =
pointers=20
valid? What if the internal representation for null pointers is nonzero? =
</P>
<P><A href=3D"http://c-faq.com/null/macro.html" =
rel=3Dsubdocument>5.4</A> What is=20
<TT>NULL</TT> and how is it defined? </P>
<P><A href=3D"http://c-faq.com/null/machnon0.html" =
rel=3Dsubdocument>5.5</A> How=20
should <TT>NULL</TT> be defined on a machine which uses a nonzero bit =
pattern as=20
the internal representation of a null pointer? </P>
<P><A href=3D"http://c-faq.com/null/safermacs.html" =
rel=3Dsubdocument>5.6</A> If=20
<TT>NULL</TT> were defined as follows: <PRE>	#define NULL ((char *)0)
</PRE>wouldn't that make function calls which pass an uncast =
<TT>NULL</TT> work?=20

<P></P>
<P><A href=3D"http://c-faq.com/null/long0.html" =
rel=3Dsubdocument>5.7</A> My vendor=20
provides header files that <TT>#define</TT> <TT>NULL</TT> as =
<TT>0L</TT>. Why?=20
</P>
<P><A href=3D"http://c-faq.com/null/fcnptr.html" =
rel=3Dsubdocument>5.8</A> Is=20
<TT>NULL</TT> valid for pointers to functions? </P>
<P><A href=3D"http://c-faq.com/null/nullor0.html" =
rel=3Dsubdocument>5.9</A> If=20
<TT>NULL</TT> and <TT>0</TT> are equivalent as null pointer constants, =
which=20
should I use? </P>
<P><A href=3D"http://c-faq.com/null/macsochange.html" =
rel=3Dsubdocument>5.10</A> But=20
wouldn't it be better to use <TT>NULL</TT> (rather than <TT>0</TT>), in =
case the=20
value of <TT>NULL</TT> changes, perhaps on a machine with nonzero =
internal null=20
pointers? </P>
<P><A href=3D"http://c-faq.com/null/nullreq.html" =
rel=3Dsubdocument>5.11</A> I once=20
used a compiler that wouldn't work unless <TT>NULL</TT> was used. </P>
<P><A href=3D"http://c-faq.com/null/nullptrmacro.html" =
rel=3Dsubdocument>5.12</A> I=20
use the preprocessor macro <PRE>#define Nullptr(type) (type *)0</PRE>to =
help me build null pointers of the=20
correct type.=20
<P></P>
<P><A href=3D"http://c-faq.com/null/varieties.html" =
rel=3Dsubdocument>5.13</A> This=20
is strange. <TT>NULL</TT> is guaranteed to be <TT>0</TT>, but the null =
pointer=20
is not? </P>
<P><A href=3D"http://c-faq.com/null/confusion.html" =
rel=3Dsubdocument>5.14</A> Why=20
is there so much confusion surrounding null pointers? Why do these =
questions=20
come up so often? </P>
<P><A href=3D"http://c-faq.com/null/confused2.html" =
rel=3Dsubdocument>5.15</A> I'm=20
confused. I just can't understand all this null pointer stuff. </P>
<P><A href=3D"http://c-faq.com/null/confusion4.html" =
rel=3Dsubdocument>5.16</A>=20
Given all the confusion surrounding null pointers, wouldn't it be easier =
simply=20
to require them to be represented internally by zeroes? </P>
<P><A href=3D"http://c-faq.com/null/machexamp.html" =
rel=3Dsubdocument>5.17</A>=20
Seriously, have any actual machines really used nonzero null pointers, =
or=20
different representations for pointers to different types? </P>
<P><A href=3D"http://c-faq.com/null/runtime0.html" =
rel=3Dsubdocument>5.18</A> Is a=20
run-time integral value of 0, cast to a pointer, guaranteed to be a null =

pointer? </P>
<P><A href=3D"http://c-faq.com/null/accessloc0.html" =
rel=3Dsubdocument>5.19</A> How=20
can I access an interrupt vector located at the machine's location 0? If =
I set a=20
pointer to <TT>0</TT>, the compiler might translate it to some nonzero =
internal=20
null pointer value. </P>
<P><A href=3D"http://c-faq.com/null/nullpassign.html" =
rel=3Dsubdocument>5.20</A>=20
What does a run-time ``null pointer assignment'' error mean? How can I =
track it=20
down? </P>
<HR>

<H4>6. Arrays and Pointers</H4>
<P><A href=3D"http://c-faq.com/aryptr/aryptr1.html" =
rel=3Dsubdocument>6.1</A> I had=20
the definition <TT>char&nbsp;a[6]</TT> in one source file, and in =
another I=20
declared <TT>extern&nbsp;char&nbsp;*a</TT>. Why didn't it work? </P>
<P><A href=3D"http://c-faq.com/aryptr/aryptr2.html" =
rel=3Dsubdocument>6.2</A> But I=20
heard that <TT>char a[]</TT> was identical to <TT>char&nbsp;*a</TT>. =
</P>
<P><A href=3D"http://c-faq.com/aryptr/aryptrequiv.html" =
rel=3Dsubdocument>6.3</A> So=20
what is meant by the ``equivalence of pointers and arrays'' in C? </P>
<P><A href=3D"http://c-faq.com/aryptr/aryptrparam.html" =
rel=3Dsubdocument>6.4</A> If=20
they're so different, then why are array and pointer declarations=20
interchangeable as function formal parameters? </P>
<P><A href=3D"http://c-faq.com/aryptr/arypbref.html" =
rel=3Dsubdocument>6.4b</A> So=20
arrays are passed by reference, even though the rest of C uses pass by =
value?=20
</P>
<P><A href=3D"http://c-faq.com/aryptr/arrayassign.html" =
rel=3Dsubdocument>6.5</A>=20
Why can't I do something like this? <PRE>	extern char *getpass();
	char str[10];
	str =3D getpass("Enter password: ");
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/aryptr/aryparmasgn.html" =
rel=3Dsubdocument>6.6</A> If=20
you can't assign to arrays, then how can <PRE>	int f(char str[])
	{
		if(str[0] =3D=3D '\0')
			str =3D "none";
		...
	}
</PRE>work?=20
<P></P>
<P><A href=3D"http://c-faq.com/aryptr/aryasgn3.html" =
rel=3Dsubdocument>6.6b</A> And=20
what about this? Isn't this an array assignment? <PRE>	char a[] =3D =
"Hello, world!\n";
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/aryptr/arraylval.html" =
rel=3Dsubdocument>6.7</A> How=20
can an array be an lvalue, if you can't assign to it? </P>
<P><A href=3D"http://c-faq.com/aryptr/practdiff.html" =
rel=3Dsubdocument>6.8</A>=20
Practically speaking, what is the difference between arrays and =
pointers? </P>
<P><A href=3D"http://c-faq.com/aryptr/constptr.html" =
rel=3Dsubdocument>6.9</A>=20
Someone explained to me that arrays were really just constant pointers. =
</P>
<P><A href=3D"http://c-faq.com/aryptr/ptrkindofary.html" =
rel=3Dsubdocument>6.10</A>=20
I'm still mystified. Is a pointer a kind of array, or is an array a kind =
of=20
pointer? </P>
<P><A href=3D"http://c-faq.com/aryptr/joke.html" =
rel=3Dsubdocument>6.11</A> I came=20
across some ``joke'' code containing the ``expression'' =
<TT>5["abcdef"]</TT> .=20
How can this be legal C? </P>
<P><A href=3D"http://c-faq.com/aryptr/aryvsadr.html" =
rel=3Dsubdocument>6.12</A>=20
Since array references decay into pointers, if <TT>arr</TT> is an array, =
what's=20
the difference between <TT>arr</TT> and <TT>&amp;arr</TT>? </P>
<P><A href=3D"http://c-faq.com/aryptr/ptrtoarray.html" =
rel=3Dsubdocument>6.13</A>=20
How do I declare a pointer to an array? </P>
<P><A href=3D"http://c-faq.com/aryptr/dynarray.html" =
rel=3Dsubdocument>6.14</A> How=20
can I set an array's size at run time? <BR>How can I avoid fixed-sized =
arrays?=20
</P>
<P><A href=3D"http://c-faq.com/aryptr/dynlocarys.html" =
rel=3Dsubdocument>6.15</A>=20
How can I declare local arrays of a size matching a passed-in array? =
</P>
<P><A href=3D"http://c-faq.com/aryptr/dynmuldimary.html" =
rel=3Dsubdocument>6.16</A>=20
How can I dynamically allocate a multidimensional array? </P>
<P><A href=3D"http://c-faq.com/aryptr/non0based.html" =
rel=3Dsubdocument>6.17</A>=20
Here's a neat trick: if I write <PRE>	int realarray[10];
	int *array =3D &amp;realarray[-1];
</PRE>I can treat <TT>array</TT> as if it were a 1-based array.=20
<P></P>
<P><A href=3D"http://c-faq.com/aryptr/pass2dary.html" =
rel=3Dsubdocument>6.18</A> My=20
compiler complained when I passed a two-dimensional array to a function=20
expecting a pointer to a pointer. </P>
<P><A href=3D"http://c-faq.com/aryptr/ary2dfunc2.html" =
rel=3Dsubdocument>6.19</A>=20
How do I write functions which accept two-dimensional arrays when the =
width is=20
not known at compile time? </P>
<P><A href=3D"http://c-faq.com/aryptr/ary2dfunc3.html" =
rel=3Dsubdocument>6.20</A>=20
How can I use statically- and dynamically-allocated multidimensional =
arrays=20
interchangeably when passing them to functions? </P>
<P><A href=3D"http://c-faq.com/aryptr/aryparmsize.html" =
rel=3Dsubdocument>6.21</A>=20
Why doesn't <TT>sizeof</TT> properly report the size of an array when =
the array=20
is a parameter to a function? I have a test routine <PRE>	f(char a[10])
	{
		int i =3D sizeof(a);
		printf("%d\n", i);
	}
</PRE>and it prints 4, not 10.=20
<P></P>
<P><A href=3D"http://c-faq.com/aryptr/extarysize.html" =
rel=3Dsubdocument>6.22</A>=20
How can code in a file where an array is declared as <TT>extern</TT> =
(i.e. it is=20
defined, and its size determined, in some other file) determine the size =
of the=20
array? <TT>sizeof</TT> doesn't seem to work. </P>
<P><A href=3D"http://c-faq.com/aryptr/arraynels.html" =
rel=3Dsubdocument>6.23</A> I=20
want to know how many elements are in an array, but <TT>sizeof</TT> =
yields the=20
size in bytes. </P>
<P><A href=3D"http://c-faq.com/aryptr/arybits.html" =
rel=3Dsubdocument>6.24</A> Is=20
there a way to have an array of bits? </P>
<HR>

<H4>7. Memory Allocation</H4>
<P><A href=3D"http://c-faq.com/malloc/malloc1.html" =
rel=3Dsubdocument>7.1</A> Why=20
doesn't this fragment work? <PRE>	char *answer;
	printf("Type something:\n");
	gets(answer);
	printf("You typed \"%s\"\n", answer);
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/malloc/malloc2.html" =
rel=3Dsubdocument>7.2</A> I=20
can't get <TT>strcat</TT> to work. I tried <PRE>	char *s1 =3D "Hello, ";
	char *s2 =3D "world!";
	char *s3 =3D strcat(s1, s2);
</PRE>but I got strange results.=20
<P></P>
<P><A href=3D"http://c-faq.com/malloc/attitude.html" =
rel=3Dsubdocument>7.3</A> But=20
the man page for <TT>strcat</TT> says that it takes two =
<TT>char&nbsp;*</TT>'s=20
as arguments. How am I supposed to know to allocate things? </P>
<P><A href=3D"http://c-faq.com/malloc/lucky.html" =
rel=3Dsubdocument>7.3b</A> I just=20
tried the code <PRE>char *p;
strcpy(p, "abc");</PRE>and it worked. How? Why didn't it crash?=20
<P></P>
<P><A href=3D"http://c-faq.com/malloc/ptrvaralloc.html" =
rel=3Dsubdocument>7.3c</A>=20
How much memory does a pointer variable allocate? </P>
<P><A href=3D"http://c-faq.com/malloc/linebfdur.html" =
rel=3Dsubdocument>7.4</A> I'm=20
reading lines from a file into an array, with this code: <PRE>	char =
linebuf[80];
	char *lines[100];
	int i;

	for(i =3D 0; i &lt; 100; i++) {
		char *p =3D fgets(linebuf, 80, fp);
		if(p =3D=3D NULL) break;
		lines[i] =3D p;
	}
</PRE>Why do all the lines end up containing copies of the last line?=20
<P></P>
<P><A href=3D"http://c-faq.com/malloc/retaggr.html" =
rel=3Dsubdocument>7.5a</A> I=20
have a function that is supposed to return a string, but when it returns =
to its=20
caller, the returned string is garbage. </P>
<P><A href=3D"http://c-faq.com/malloc/retaggr2.html" =
rel=3Dsubdocument>7.5b</A> So=20
what's the right way to return a string or other aggregate? </P>
<P><A href=3D"http://c-faq.com/malloc/decl.html" =
rel=3Dsubdocument>7.6</A> Why am I=20
getting ``warning: assignment of pointer from integer lacks a cast'' for =
calls=20
to <TT>malloc</TT>? </P>
<P><A href=3D"http://c-faq.com/malloc/cast.html" =
rel=3Dsubdocument>7.7</A> Why does=20
some code carefully cast the values returned by <TT>malloc</TT> to the =
pointer=20
type being allocated? </P>
<P><A href=3D"http://c-faq.com/malloc/mallocnocast.html" =
rel=3Dsubdocument>7.7b</A>=20
What's wrong with casting <TT>malloc</TT>'s return value? </P>
<P><A href=3D"http://c-faq.com/malloc/mallocnocast2.html" =
rel=3Dsubdocument>7.7c</A>=20
In a call to <TT>malloc</TT>, what does an error like ``Cannot convert=20
`<TT>void&nbsp;*</TT>' to `<TT>int&nbsp;*''' mean? </TT></P>
<P><A href=3D"http://c-faq.com/malloc/sizeofchar.html" =
rel=3Dsubdocument>7.8</A> I=20
see code like <PRE>	char *p =3D malloc(strlen(s) + 1);
	strcpy(p, s);
</PRE>Shouldn't that be <TT>malloc((strlen(s) + 1) * sizeof(char))</TT>? =

<P></P>
<P><A href=3D"http://c-faq.com/malloc/mymallocretp.html" =
rel=3Dsubdocument>7.9</A> I=20
wrote a little wrapper around <TT>malloc</TT>, but it doesn't work: =
<PRE>	#include &lt;stdio.h&gt;
	#include &lt;stdlib.h&gt;

	mymalloc(void *retp, size_t size)
	{
		retp =3D malloc(size);
		if(retp =3D=3D NULL) {
			fprintf(stderr, "out of memory\n");
			exit(EXIT_FAILURE);
		}
	}
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/malloc/mimic3.html" =
rel=3Dsubdocument>7.10</A> I'm=20
trying to declare a pointer and allocate some space for it, but it's not =

working. What's wrong with this code? <PRE>char *p;
*p =3D malloc(10);</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/malloc/fcninit2.html" =
rel=3Dsubdocument>7.10a</A>=20
What's wrong with this initialization? <PRE>char *p =3D =
malloc(10);</PRE>My compiler is complaining about an ``invalid=20
initializer'', or something.=20
<P></P>
<P><A href=3D"http://c-faq.com/malloc/lintpalign2.html" =
rel=3Dsubdocument>7.10b</A>=20
How can I shut off the ``warning: possible pointer alignment problem'' =
message=20
which <TT>lint</TT> gives me for each call to <TT>malloc</TT>? </P>
<P><A href=3D"http://c-faq.com/malloc/dynarray2.html" =
rel=3Dsubdocument>7.11</A> How=20
can I dynamically allocate arrays? </P>
<P><A href=3D"http://c-faq.com/malloc/memavail2.html" =
rel=3Dsubdocument>7.12</A> How=20
can I find out how much memory is available? </P>
<P><A href=3D"http://c-faq.com/malloc/malloc0xref.html" =
rel=3Dsubdocument>7.13</A>=20
What should <TT>malloc(0)</TT> do? Return a null pointer or a pointer to =
0=20
bytes? </P>
<P><A href=3D"http://c-faq.com/malloc/lazyalloc.html" =
rel=3Dsubdocument>7.14</A>=20
I've heard that some operating systems don't actually allocate=20
<TT>malloc</TT>'ed memory until the program tries to use it. Is this =
legal? </P>
<P><A href=3D"http://c-faq.com/malloc/sizetlong.html" =
rel=3Dsubdocument>7.15</A>=20
<TT>malloc</TT> is returning crazy pointer values, but I <EM>did</EM> =
read=20
question <A href=3D"http://c-faq.com/decl.html">7.6</A> and I have =
included the=20
line <PRE>	extern void *malloc();
</PRE>before I call it.=20
<P></P>
<P><A href=3D"http://c-faq.com/malloc/sizewrap.html" =
rel=3Dsubdocument>7.16</A> I'm=20
allocating a large array for some numeric work, using the line <PRE>	=
double *array =3D malloc(300 * 300 * sizeof(double));
</PRE><TT>malloc</TT> isn't returning null, but the program is acting =
strangely,=20
as if it's overwriting memory, or <TT>malloc</TT> isn't allocating as =
much as I=20
asked for, or something.=20
<P></P>
<P><A href=3D"http://c-faq.com/malloc/segment.html" =
rel=3Dsubdocument>7.17</A> I've=20
got 8 meg of memory in my PC. Why can I only seem to <TT>malloc</TT> =
640K or so?=20
</P>
<P><A href=3D"http://c-faq.com/malloc/efficiency.html" =
rel=3Dsubdocument>7.18</A> My=20
application depends heavily on dynamic allocation of nodes for data =
structures,=20
and <TT>malloc</TT>/<TT>free</TT> overhead is becoming a bottleneck. =
What can I=20
do? </P>
<P><A href=3D"http://c-faq.com/malloc/crash.html" =
rel=3Dsubdocument>7.19</A> My=20
program is crashing, apparently somewhere down inside <TT>malloc</TT>, =
but I=20
can't see anything wrong with it. Is there a bug in <TT>malloc</TT>? =
</P>
<P><A href=3D"http://c-faq.com/malloc/noscale.html" =
rel=3Dsubdocument>7.19b</A> </P>
<P>I'm dynamically allocating an array, like this: <PRE>	int *iarray =3D =
(int *)malloc(nints);
</PRE><TT>malloc</TT> isn't returning NULL, but the code isn't working.=20
<P></P>
<P><A href=3D"http://c-faq.com/malloc/useafterfree.html" =
rel=3Dsubdocument>7.20</A>=20
You can't use dynamically-allocated memory after you free it, can you? =
</P>
<P><A href=3D"http://c-faq.com/malloc/ptrafterfree.html" =
rel=3Dsubdocument>7.21</A>=20
Why isn't a pointer null after calling <TT>free</TT>? <BR>How unsafe is =
it to=20
use (assign, compare) a pointer value after it's been freed? </P>
<P><A href=3D"http://c-faq.com/malloc/local.html" =
rel=3Dsubdocument>7.22</A> When I=20
call <TT>malloc</TT> to allocate memory for a pointer which is local to =
a=20
function, do I have to explicitly <TT>free</TT> it? </P>
<P><A href=3D"http://c-faq.com/malloc/freeforall.html" =
rel=3Dsubdocument>7.23</A>=20
I'm allocating structures which contain pointers to other =
dynamically-allocated=20
objects. When I free a structure, do I also have to free each subsidiary =

pointer? </P>
<P><A href=3D"http://c-faq.com/malloc/freeb4exit.html" =
rel=3Dsubdocument>7.24</A>=20
Must I free allocated memory before the program exits? </P>
<P><A href=3D"http://c-faq.com/malloc/freetoOS.html" =
rel=3Dsubdocument>7.25</A> I=20
have a program which <TT>malloc</TT>s and later <TT>free</TT>s a lot of =
memory,=20
but I can see from the operating system that memory usage doesn't =
actually go=20
back down. </P>
<P><A href=3D"http://c-faq.com/malloc/freesize.html" =
rel=3Dsubdocument>7.26</A> How=20
does <TT>free</TT> know how many bytes to free? </P>
<P><A href=3D"http://c-faq.com/malloc/querysize.html" =
rel=3Dsubdocument>7.27</A> So=20
can I query the malloc package to find out how big an allocated block =
is? </P>
<P><A href=3D"http://c-faq.com/malloc/sizeof.html" =
rel=3Dsubdocument>7.28</A> Why=20
doesn't <TT>sizeof</TT> tell me the size of the block of memory pointed =
to by a=20
pointer? </P>
<P><A href=3D"http://c-faq.com/malloc/realloc.html" =
rel=3Dsubdocument>7.29</A>=20
Having dynamically allocated an array (as in question <A=20
href=3D"http://c-faq.com/aryptr/dynarray.html">6.14</A>), can I change =
its size?=20
</P>
<P><A href=3D"http://c-faq.com/malloc/reallocnull.html" =
rel=3Dsubdocument>7.30</A>=20
Is it legal to pass a null pointer as the first argument to =
<TT>realloc</TT>?=20
Why would you want to? </P>
<P><A href=3D"http://c-faq.com/malloc/calloc.html" =
rel=3Dsubdocument>7.31</A> What's=20
the difference between <TT>calloc</TT> and <TT>malloc</TT>? Which should =
I use?=20
Is it safe to take advantage of <TT>calloc</TT>'s zero-filling? Does=20
<TT>free</TT> work on memory allocated with <TT>calloc</TT>, or do you =
need a=20
<TT>cfree</TT>? </P>
<P><A href=3D"http://c-faq.com/malloc/alloca.html" =
rel=3Dsubdocument>7.32</A> What=20
is <TT>alloca</TT> and why is its use discouraged? </P>
<HR>

<H4>8. Characters and Strings</H4>
<P><A href=3D"http://c-faq.com/charstring/strvschar.html" =
rel=3Dsubdocument>8.1</A>=20
Why doesn't <PRE>strcat(string,&nbsp;'!');</PRE>work?=20
<P></P>
<P><A href=3D"http://c-faq.com/charstring/stringeq.html" =
rel=3Dsubdocument>8.2</A>=20
I'm checking a string to see if it matches a particular value. Why isn't =
this=20
code working? <PRE>	char *string;
	...
	if(string =3D=3D "value") {
		/* string matches "value" */
		...
	}
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/charstring/assign.html" =
rel=3Dsubdocument>8.3</A> If=20
I can say <PRE>	char a[] =3D "Hello, world!";
</PRE>why can't I say <PRE>	char a[14];
	a =3D "Hello, world!";
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/charstring/malloc.html" =
rel=3Dsubdocument>8.4</A> I=20
can't get <TT>strcat</TT> to work. I tried <PRE>	char *s1 =3D "Hello, ";
	char *s2 =3D "world!";
	char *s3 =3D strcat(s1, s2);
</PRE>but I got strange results.=20
<P></P>
<P><A href=3D"http://c-faq.com/charstring/strlitinit.html" =
rel=3Dsubdocument>8.5</A>=20
What is the difference between these initializations? <PRE>char a[] =3D =
"string literal";
char *p  =3D "string literal";
</PRE>My program crashes if I try to assign a new value to =
<TT>p[i]</TT>.=20
<P></P>
<P><A href=3D"http://c-faq.com/charstring/asciivals.html" =
rel=3Dsubdocument>8.6</A>=20
How can I get the numeric value (i.e. ASCII or other character set code) =

corresponding to a character, or vice versa? </P>
<P><A href=3D"http://c-faq.com/charstring/substr.html" =
rel=3Dsubdocument>8.7</A>=20
Does C have anything like the ``substr'' (extract substring) routine =
present in=20
other languages? </P>
<P><A href=3D"http://c-faq.com/charstring/runtimesc.html" =
rel=3Dsubdocument>8.8</A>=20
I'm reading strings typed by the user into an array, and then printing =
them out=20
later. When the user types a sequence like <TT>\n</TT>, why isn't it =
being=20
handled properly? </P>
<P><A href=3D"http://c-faq.com/charstring/sizeofchar.html" =
rel=3Dsubdocument>8.9</A>=20
I think something's wrong with my compiler: I just noticed that=20
<TT>sizeof('a')</TT> is 2, not 1 (i.e. not <TT>sizeof(char)</TT>). </P>
<P><A href=3D"http://c-faq.com/charstring/wchar.html" =
rel=3Dsubdocument>8.10</A> I'm=20
starting to think about multinational character sets, and I'm worried =
about the=20
implications of making <TT>sizeof(char)</TT> be 2 so that 16-bit =
character sets=20
can be represented. </P>
<HR>

<H4>9. Boolean Expressions and Variables</H4>
<P><A href=3D"http://c-faq.com/bool/booltype.html" =
rel=3Dsubdocument>9.1</A> What is=20
the right type to use for Boolean values in C? Is there a standard type? =
Should=20
I use <TT>#define</TT>s or enums for the true and false values? </P>
<P><A href=3D"http://c-faq.com/bool/bool2.html" =
rel=3Dsubdocument>9.2</A> Isn't=20
#defining <TT>TRUE</TT> to be 1 dangerous, since any nonzero value is =
considered=20
``true'' in C? What if a built-in logical or relational operator =
``returns''=20
something other than 1? </P>
<P><A href=3D"http://c-faq.com/bool/ifptr.html" =
rel=3Dsubdocument>9.3</A> Is=20
<TT>if(p)</TT>, where <TT>p</TT> is a pointer, a valid and portable =
test? </P>
<P><A href=3D"http://c-faq.com/bool/macros.html" =
rel=3Dsubdocument>9.4</A> Should I=20
use symbolic names like <TT>TRUE</TT> and <TT>FALSE</TT> for Boolean =
constants,=20
or plain 1 and 0? </P>
<P><A href=3D"http://c-faq.com/bool/thirdparty.html" =
rel=3Dsubdocument>9.5</A> A=20
third-party header file I just started using is defining its own =
<TT>TRUE</TT>=20
and <TT>FALSE</TT> values incompatibly with the code I've already =
developed.=20
What can I do? </P>
<HR>

<H4>10. C Preprocessor</H4>
<P><A href=3D"http://c-faq.com/cpp/safemacros.html" =
rel=3Dsubdocument>10.1</A> I'm=20
trying to define a few simple little function-like macros such as <PRE>	=
#define square(x) x * x
</PRE>but they're not always working.=20
<P></P>
<P><A href=3D"http://c-faq.com/cpp/slm.html" rel=3Dsubdocument>10.2</A> =
Here are=20
some cute preprocessor macros: <PRE>	#define begin	{
	#define end	}
</PRE>With these, I can write C code that looks more like Pascal. What =
do y'all=20
think?=20
<P></P>
<P><A href=3D"http://c-faq.com/cpp/swapmacro.html" =
rel=3Dsubdocument>10.3</A> How=20
can I write a generic macro to swap two values? </P>
<P><A href=3D"http://c-faq.com/cpp/multistmt.html" =
rel=3Dsubdocument>10.4</A> What's=20
the best way to write a multi-statement macro? </P>
<P><A href=3D"http://c-faq.com/cpp/typedefvsdefine.html" =
rel=3Dsubdocument>10.5</A>=20
What's the difference between using a <TT>typedef</TT> or a =
<TT>#define</TT> for=20
a user-defined type? </P>
<P><A href=3D"http://c-faq.com/cpp/constvsdefine.html" =
rel=3Dsubdocument>10.5b</A>=20
What's the difference between <PRE>	const MAXSIZE =3D 100;
</PRE><PRE>and
</PRE><PRE>	#define MAXSIZE 100
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/cpp/hfiles.html" =
rel=3Dsubdocument>10.6</A> I'm=20
splitting up a program into multiple source files for the first time, =
and I'm=20
wondering what to put in <TT>.c</TT> files and what to put in =
<TT>.h</TT> files.=20
(What does ``<TT>.h</TT>'' mean, anyway?) </P>
<P><A href=3D"http://c-faq.com/cpp/nestincl.html" =
rel=3Dsubdocument>10.7</A> Is it=20
acceptable for one header file to <TT>#include</TT> another? </P>
<P><A href=3D"http://c-faq.com/cpp/inclkinds.html" =
rel=3Dsubdocument>10.8a</A>=20
What's the difference between <TT>#include&nbsp;&lt;&gt;</TT> and=20
<TT>#include&nbsp;""</TT> ? </P>
<P><A href=3D"http://c-faq.com/cpp/cppsearchpath.html" =
rel=3Dsubdocument>10.8b</A>=20
What are the complete rules for header file searching? </P>
<P><A href=3D"http://c-faq.com/cpp/headerglom.html" =
rel=3Dsubdocument>10.9</A> I'm=20
getting strange syntax errors on the very first declaration in a file, =
but it=20
looks fine. </P>
<P><A href=3D"http://c-faq.com/cpp/def3rdparty.html" =
rel=3Dsubdocument>10.10</A> I'm=20
using header files which accompany two different third-party libraries, =
and they=20
are ``helpfully'' defining common macros such as <TT>TRUE</TT>, =
<TT>FALSE</TT>,=20
<TT>Min()</TT>, and <TT>Max()</TT>, but the definitions clash with each =
other=20
and with definitions I'd already established in my own header files. =
What can I=20
do? </P>
<P><A href=3D"http://c-faq.com/cpp/extlibs.html" =
rel=3Dsubdocument>10.10b</A> I'm=20
#including the right header file for the library function I'm using, but =
the=20
linker keeps saying it's undefined. </P>
<P><A href=3D"http://c-faq.com/cpp/missinghdr.html" =
rel=3Dsubdocument>10.11</A> I'm=20
compiling a program, and I seem to be missing one of the header files it =

requires. Can someone send me a copy? </P>
<P><A href=3D"http://c-faq.com/cpp/ifstrcmp.html" =
rel=3Dsubdocument>10.12</A> How=20
can I construct preprocessor <TT>#if</TT> expressions which compare =
strings?=20
</P>
<P><A href=3D"http://c-faq.com/cpp/ifexpr.html" =
rel=3Dsubdocument>10.13</A> Does the=20
<TT>sizeof</TT> operator work in preprocessor <TT>#if</TT> directives? =
</P>
<P><A href=3D"http://c-faq.com/cpp/ifddef.html" =
rel=3Dsubdocument>10.14</A> Can I=20
use an <TT>#ifdef</TT> in a <TT>#define</TT> line, to define something =
two=20
different ways, like this? <PRE>	#define a b \
	#ifdef whatever
		c d
	#else
		e f g
	#endif
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/cpp/iftypedef.html" =
rel=3Dsubdocument>10.15</A> Is=20
there anything like an <TT>#ifdef</TT> for <TT>typedef</TT>s? </P>
<P><A href=3D"http://c-faq.com/cpp/ifendian.html" =
rel=3Dsubdocument>10.16</A> How=20
can I use a preprocessor <TT>#if</TT> expression to tell whether a =
machine's=20
byte order is big-endian or little-endian? </P>
<P><A href=3D"http://c-faq.com/cpp/ifdefsyntax.html" =
rel=3Dsubdocument>10.17</A> I'm=20
getting strange syntax errors inside lines I've <TT>#ifdef</TT>fed out. =
</P>
<P><A href=3D"http://c-faq.com/cpp/unifdef.html" =
rel=3Dsubdocument>10.18</A> I=20
inherited some code which contains far too many <TT>#ifdef</TT>'s for my =
taste.=20
How can I preprocess the code to leave only one conditional compilation =
set,=20
without running it through the preprocessor and expanding all of the=20
<TT>#include</TT>'s and <TT>#define</TT>'s as well? </P>
<P><A href=3D"http://c-faq.com/cpp/listpredef.html" =
rel=3Dsubdocument>10.19</A> How=20
can I list all of the predefined identifiers? </P>
<P><A href=3D"http://c-faq.com/cpp/oldpaste.html" =
rel=3Dsubdocument>10.20</A> I have=20
some old code that tries to construct identifiers with a macro like =
<PRE>#define Paste(a, b) a/**/b</PRE>but it doesn't work any more.=20
<P></P>
<P><A href=3D"http://c-faq.com/cpp/charize.html" =
rel=3Dsubdocument>10.21</A> I have=20
an old macro =
<PRE>#define&nbsp;CTRL(c)&nbsp;('c'&nbsp;&amp;&nbsp;037)</PRE>that =
doesn't seem=20
to work any more.=20
<P></P>
<P><A href=3D"http://c-faq.com/cpp/macstrexp2.html" =
rel=3Dsubdocument>10.22</A> Why=20
is the macro <PRE>	#define TRACE(n) printf("TRACE: %d\n", n)
</PRE>giving me the warning ``macro replacement within a string =
literal''? It=20
seems to be expanding <PRE>	TRACE(count);
</PRE>as <PRE>	printf("TRACE: %d\count", count);
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/cpp/macstrexp1.html" =
rel=3Dsubdocument>10.23</A> How=20
can I use a macro argument inside a string literal in the macro =
expansion? </P>
<P><A href=3D"http://c-faq.com/cpp/stringize.html" =
rel=3Dsubdocument>10.24</A> I'm=20
trying to use the ANSI ``stringizing'' preprocessing operator =
`<TT>#</TT>' to=20
insert the value of a symbolic constant into a message, but it keeps =
stringizing=20
the macro's name rather than its value. </P>
<P><A href=3D"http://c-faq.com/cpp/notgeneral.html" =
rel=3Dsubdocument>10.25</A> I've=20
got this tricky preprocessing I want to do and I can't figure out a way =
to do=20
it. </P>
<P><A href=3D"http://c-faq.com/cpp/varargs.html" =
rel=3Dsubdocument>10.26</A> How can=20
I write a macro which takes a variable number of arguments, or use the=20
preprocessor to ``turn off'' a function call with a variable number of=20
arguments? </P>
<P><A href=3D"http://c-faq.com/cpp/debugmacs.html" =
rel=3Dsubdocument>10.27</A> How=20
can I include expansions of the <TT>__FILE__</TT> and <TT>__LINE__</TT> =
macros=20
in a general-purpose debugging macro? </P>
<HR>

<H4>11. ANSI/ISO Standard C</H4>
<P><A href=3D"http://c-faq.com/ansi/ansi1.html" =
rel=3Dsubdocument>11.1</A> What is=20
the ``ANSI C Standard?'' </P>
<P><A href=3D"http://c-faq.com/ansi/avail.html" =
rel=3Dsubdocument>11.2</A> How can I=20
get a copy of the Standard? </P>
<P><A href=3D"http://c-faq.com/ansi/updates.html" =
rel=3Dsubdocument>11.2b</A> Where=20
can I get information about updates to the Standard? </P>
<P><A href=3D"http://c-faq.com/ansi/argpromos.html" =
rel=3Dsubdocument>11.3</A> My=20
ANSI compiler complains about a mismatch when it sees <PRE>	extern int =
func(float);

	int func(x)
	float x;
	{ ...
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/ansi/mixoldandnew.html" =
rel=3Dsubdocument>11.4</A>=20
Can you mix old-style and new-style function syntax? </P>
<P><A href=3D"http://c-faq.com/ansi/structinproto.html" =
rel=3Dsubdocument>11.5</A>=20
Why does the declaration <PRE>extern int f(struct x *p);</PRE>give me an =
obscure warning message about=20
``struct x declared inside parameter list''?=20
<P></P>
<P><A href=3D"http://c-faq.com/ansi/varargproto.html" =
rel=3Dsubdocument>11.6</A> I=20
had a frustrating problem which turned out to be caused by the line =
<PRE>	printf("%d", n);
</PRE>where <TT>n</TT> was actually a <TT>long&nbsp;int</TT>. I thought =
that=20
ANSI function prototypes were supposed to guard against argument type =
mismatches=20
like this.=20
<P></P>
<P><A href=3D"http://c-faq.com/ansi/varargproto2.html" =
rel=3Dsubdocument>11.7</A> I=20
heard that you have to <TT>#include</TT> <TT>&lt;stdio.h&gt;</TT> before =
calling=20
<TT>printf</TT>. Why? </P>
<P><A href=3D"http://c-faq.com/ansi/constasconst.html" =
rel=3Dsubdocument>11.8</A> I=20
don't understand why I can't use <TT>const</TT> values in initializers =
and array=20
dimensions, as in <PRE>	const int n =3D 5;
	int a[n];
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/ansi/strlitnotconst.html" =
rel=3Dsubdocument>11.8b</A>=20
If you can't modify string literals, why aren't they defined as being =
arrays of=20
<TT>const</TT> characters? </P>
<P><A href=3D"http://c-faq.com/ansi/constptrconst.html" =
rel=3Dsubdocument>11.9</A>=20
What's the difference between <TT>const&nbsp;char&nbsp;*p</TT>,=20
<TT>char&nbsp;const&nbsp;*p</TT>, and =
<TT>char&nbsp;*&nbsp;const&nbsp;p</TT>?=20
</P>
<P><A href=3D"http://c-faq.com/ansi/constmismatch.html" =
rel=3Dsubdocument>11.10</A>=20
Why can't I pass a <TT>char&nbsp;**</TT> to a function which expects a=20
<TT>const&nbsp;char&nbsp;**</TT>? </P>
<P><A href=3D"http://c-faq.com/ansi/typedefconst.html" =
rel=3Dsubdocument>11.11</A>=20
I've got the declarations <PRE>	typedef char *charp;
	const charp p;
</PRE>Why is <TT>p</TT> turning out <TT>const</TT>, instead of the =
characters=20
pointed to?=20
<P></P>
<P><A href=3D"http://c-faq.com/ansi/constvsdefine2.html"=20
rel=3Dsubdocument>11.11b</A> What's the difference between <PRE>	const =
MAXSIZE =3D 100;
</PRE><PRE>and
</PRE><PRE>	#define MAXSIZE 100
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/ansi/maindecl.html" =
rel=3Dsubdocument>11.12a</A>=20
What's the correct declaration of <TT>main()</TT>? </P>
<P><A href=3D"http://c-faq.com/ansi/voidmain.html" =
rel=3Dsubdocument>11.12b</A> Can=20
I declare <TT>main</TT> as <TT>void</TT>, to shut off these annoying =
``main=20
returns no value'' messages? </P>
<P><A href=3D"http://c-faq.com/ansi/envp.html" =
rel=3Dsubdocument>11.13</A> But what=20
about <TT>main</TT>'s third argument, <TT>envp</TT>? </P>
<P><A href=3D"http://c-faq.com/ansi/voidmain3.html" =
rel=3Dsubdocument>11.14a</A> I=20
believe that declaring <TT>void&nbsp;main()</TT> can't fail, since I'm =
calling=20
<TT>exit</TT> instead of returning, and anyway my operating system =
ignores a=20
program's exit/return status. </P>
<P><A href=3D"http://c-faq.com/ansi/voidmainexamp.html" =
rel=3Dsubdocument>11.14b</A>=20
So what could go wrong? Are there really any systems where=20
<TT>void&nbsp;main()</TT> doesn't work? </P>
<P><A href=3D"http://c-faq.com/ansi/voidmainbooks.html" =
rel=3Dsubdocument>11.15</A>=20
The book I've been using, <I>C Programing for the Compleat Idiot</I>, =
always=20
uses <TT>void&nbsp;main()</TT>. </P>
<P><A href=3D"http://c-faq.com/ansi/exitvsreturn.html" =
rel=3Dsubdocument>11.16</A>=20
Is <TT>exit(status)</TT> truly equivalent to returning the same =
<TT>status</TT>=20
from <TT>main</TT>? </P>
<P><A href=3D"http://c-faq.com/ansi/stringize.html" =
rel=3Dsubdocument>11.17</A> I'm=20
trying to use the ANSI ``stringizing'' preprocessing operator =
`<TT>#</TT>' to=20
insert the value of a symbolic constant into a message, but it keeps =
stringizing=20
the macro's name rather than its value. </P>
<P><A href=3D"http://c-faq.com/ansi/macstrexp.html" =
rel=3Dsubdocument>11.18</A> What=20
does the message ``warning: macro replacement within a string literal'' =
mean?=20
</P>
<P><A href=3D"http://c-faq.com/ansi/ifdefsyntax.html" =
rel=3Dsubdocument>11.19</A>=20
I'm getting strange syntax errors inside lines I've <TT>#ifdef</TT>fed =
out. </P>
<P><A href=3D"http://c-faq.com/ansi/pragma.html" =
rel=3Dsubdocument>11.20</A> What=20
are <TT>#pragma</TT>s and what are they good for? </P>
<P><A href=3D"http://c-faq.com/ansi/pragmaonce.html" =
rel=3Dsubdocument>11.21</A>=20
What does ``<TT>#pragma&nbsp;once</TT>'' mean? I found it in some header =
files.=20
</P>
<P><A href=3D"http://c-faq.com/ansi/nonstrings.html" =
rel=3Dsubdocument>11.22</A> Is=20
<TT>char&nbsp;a[3]&nbsp;=3D&nbsp;"abc";</TT> legal? What does it mean? =
</P>
<P><A href=3D"http://c-faq.com/ansi/aryvsadr.html" =
rel=3Dsubdocument>11.23</A> Since=20
array references decay into pointers, if <TT>arr</TT> is an array, =
what's the=20
difference between <TT>arr</TT> and <TT>&amp;arr</TT>? </P>
<P><A href=3D"http://c-faq.com/ansi/voidparith.html" =
rel=3Dsubdocument>11.24</A> Why=20
can't I perform arithmetic on a <TT>void&nbsp;*</TT> pointer? </P>
<P><A href=3D"http://c-faq.com/ansi/memmove.html" =
rel=3Dsubdocument>11.25</A> What's=20
the difference between <TT>memcpy</TT> and <TT>memmove</TT>? </P>
<P><A href=3D"http://c-faq.com/ansi/malloc0.html" =
rel=3Dsubdocument>11.26</A> What=20
should <TT>malloc(0)</TT> do? Return a null pointer or a pointer to 0 =
bytes?=20
</P>
<P><A href=3D"http://c-faq.com/ansi/extidsignif.html" =
rel=3Dsubdocument>11.27</A>=20
Why does the ANSI Standard place limits on the length and =
case-significance of=20
external identifiers? </P>
<P><A href=3D"http://c-faq.com/ansi/noalias.html" =
rel=3Dsubdocument>11.28</A> What=20
was <TT>noalias</TT> and what ever happened to it? </P>
<P><A href=3D"http://c-faq.com/ansi/preansi.html" =
rel=3Dsubdocument>11.29a</A> My=20
compiler is rejecting the simplest possible test programs, with all =
kinds of=20
syntax errors. It's complaining about the first line of <PRE>	main(int =
argc, char **argv)
	{
		return 0;
	}
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/ansi/preansi2.html" =
rel=3Dsubdocument>11.29b</A> What=20
does the message ``Automatic aggregate intialization is an ANSI =
feature'' mean?=20
My compiler is complaining about valid ANSI code. </P>
<P><A href=3D"http://c-faq.com/ansi/preansilib.html" =
rel=3Dsubdocument>11.30</A> Why=20
are some ANSI/ISO Standard library functions showing up as undefined, =
even=20
though I've got an ANSI compiler? </P>
<P><A href=3D"http://c-faq.com/ansi/cproto.html" =
rel=3Dsubdocument>11.31</A> Does=20
anyone have a tool for converting old-style C programs to ANSI C, or =
vice versa,=20
or for automatically generating prototypes? </P>
<P><A href=3D"http://c-faq.com/ansi/extensions.html" =
rel=3Dsubdocument>11.32</A> Why=20
won't the Frobozz Magic C Compiler, which claims to be ANSI compliant, =
accept=20
this code? I know that the code is ANSI, because <TT>gcc</TT> accepts =
it. </P>
<P><A href=3D"http://c-faq.com/ansi/undef.html" =
rel=3Dsubdocument>11.33</A> People=20
seem to make a point of distinguishing between implementation-defined,=20
unspecified, and undefined behavior. What do these mean? </P>
<P><A href=3D"http://c-faq.com/ansi/compliance.html" =
rel=3Dsubdocument>11.33b</A>=20
What does it really mean for a program to be ``legal'' or ``valid'' or=20
``conforming''? </P>
<P><A href=3D"http://c-faq.com/ansi/appalled.html" =
rel=3Dsubdocument>11.34</A> I'm=20
appalled that the ANSI Standard leaves so many issues undefined. Isn't a =

Standard's whole job to standardize these things? </P>
<P><A href=3D"http://c-faq.com/ansi/experiment.html" =
rel=3Dsubdocument>11.35</A>=20
People keep saying that the behavior of <TT>i&nbsp;=3D&nbsp;i++</TT> is =
undefined,=20
but I just tried it on an ANSI-conforming compiler, and got the results =
I=20
expected. </P>
<HR>

<H4>12. Stdio</H4>
<P><A href=3D"http://c-faq.com/stdio/getcharc.html" =
rel=3Dsubdocument>12.1</A>=20
What's wrong with this code? <PRE>char c;
while((c =3D getchar()) !=3D EOF) ...</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/stdio/eofval.html" =
rel=3Dsubdocument>12.1b</A> I have=20
a simple little program that reads characters until EOF, but how do I =
actually=20
<EM>enter</EM> that ``EOF'' value from the keyboard? I see that =
<TT>EOF</TT> is=20
defined by <TT>&lt;stdio.h&gt;</TT> to be -1; am I supposed to enter -1? =
</P>
<P><A href=3D"http://c-faq.com/stdio/feof.html" =
rel=3Dsubdocument>12.2</A> Why does=20
the simple line-copying loop <TT>while(!feof(infp)) {=20
fgets(buf,&nbsp;MAXLINE,&nbsp;infp); fputs(buf,&nbsp;outfp); } </TT>copy =
the=20
last line twice? </P>
<P><A href=3D"http://c-faq.com/stdio/linebfdur.html" =
rel=3Dsubdocument>12.3</A> I'm=20
using <TT>fgets</TT> to read lines from a file into an array of =
pointers. Why do=20
all the lines end up containing copies of the last line? </P>
<P><A href=3D"http://c-faq.com/stdio/fflush.html" =
rel=3Dsubdocument>12.4</A> My=20
program's prompts and intermediate output don't always show up on the =
screen,=20
especially when I pipe the output through another program. </P>
<P><A href=3D"http://c-faq.com/stdio/charatatime.html" =
rel=3Dsubdocument>12.5</A>=20
How can I read one character at a time, without waiting for the RETURN =
key? </P>
<P><A href=3D"http://c-faq.com/stdio/printfpercent.html" =
rel=3Dsubdocument>12.6</A>=20
How can I print a <TT>'%'</TT> character in a <TT>printf</TT> format =
string? I=20
tried <TT>\%</TT>, but it didn't work. </P>
<P><A href=3D"http://c-faq.com/stdio/printftypes.html" =
rel=3Dsubdocument>12.7</A>=20
Why doesn't <PRE>long int n =3D 123456;
printf("%d\n", n);</PRE>work?=20
<P></P>
<P><A href=3D"http://c-faq.com/stdio/varargproto.html" =
rel=3Dsubdocument>12.8</A> I=20
thought that ANSI function prototypes were supposed to guard against =
argument=20
type mismatches. </P>
<P><A href=3D"http://c-faq.com/stdio/scanfvsprintf.html" =
rel=3Dsubdocument>12.9</A>=20
Someone told me it was wrong to use <TT>%lf</TT> with <TT>printf</TT>. =
How can=20
<TT>printf</TT> use <TT>%f</TT> for type <TT>double</TT>, if =
<TT>scanf</TT>=20
requires <TT>%lf</TT>? </P>
<P><A href=3D"http://c-faq.com/stdio/printftypedef.html" =
rel=3Dsubdocument>12.9b</A>=20
What <TT>printf</TT> format should I use for a typedef like =
<TT>size_t</TT> when=20
I don't know whether it's <TT>long</TT> or some other type? </P>
<P><A href=3D"http://c-faq.com/stdio/printfvwid.html" =
rel=3Dsubdocument>12.10</A>=20
How can I implement a variable field width with <TT>printf</TT>? That =
is,=20
instead of something like <TT>%8d</TT>, I want the width to be specified =
at run=20
time. </P>
<P><A href=3D"http://c-faq.com/stdio/commaprint.html" =
rel=3Dsubdocument>12.11</A>=20
How can I print numbers with commas separating the thousands? <BR>What =
about=20
currency formatted numbers? </P>
<P><A href=3D"http://c-faq.com/stdio/scanf1.html" =
rel=3Dsubdocument>12.12</A> Why=20
doesn't the call <TT>scanf("%d", i)</TT> work? </P>
<P><A href=3D"http://c-faq.com/stdio/scanf1a.html" =
rel=3Dsubdocument>12.12b</A> Why=20
<EM>does</EM> the call <PRE>char s[30];
scanf("%s", s);</PRE>work? I thought you always needed an <TT>&amp;</TT> =
on each=20
variable passed to <TT>scanf</TT>.=20
<P></P>
<P><A href=3D"http://c-faq.com/stdio/scanf2.html" =
rel=3Dsubdocument>12.13</A> Why=20
doesn't this code: <PRE>double d;
scanf("%f", &amp;d);</PRE>work?=20
<P></P>
<P><A href=3D"http://c-faq.com/stdio/scanfh.html" =
rel=3Dsubdocument>12.14</A> Why=20
doesn't the code <PRE>short int s;
scanf("%d", &amp;s);</PRE>work?=20
<P></P>
<P><A href=3D"http://c-faq.com/stdio/scanfvwid.html" =
rel=3Dsubdocument>12.15</A> How=20
can I specify a variable width in a <TT>scanf</TT> format string? </P>
<P><A href=3D"http://c-faq.com/stdio/datafmts.html" =
rel=3Dsubdocument>12.16</A> How=20
can I read data from data files with particular formats? <BR>How can I =
read ten=20
floats without having to use a jawbreaker <TT>scanf</TT> format <BR>like =

<TT>"%f&nbsp;%f&nbsp;%f&nbsp;%f&nbsp;%f&nbsp;%f&nbsp;%f&nbsp;%f&nbsp;%f&n=
bsp;%f"</TT>?=20
<BR>How can I read an arbitrary number of fields from a line into an =
array? </P>
<P><A href=3D"http://c-faq.com/stdio/scanfhang.html" =
rel=3Dsubdocument>12.17</A>=20
When I read numbers from the keyboard with <TT>scanf</TT> and a =
<TT>"%d\n"</TT>=20
format, like this: <PRE>	int n;
	scanf("%d\n", &amp;n);
	printf("you typed %d\n", n);
</PRE>it seems to hang until I type one extra line of input.=20
<P></P>
<P><A href=3D"http://c-faq.com/stdio/scanfinterlace.html"=20
rel=3Dsubdocument>12.18a</A> I'm reading a number with <TT>scanf</TT> =
and=20
<TT>%d</TT>, and then a string with <TT>gets()</TT>: <PRE>	int n;
	char str[80];

	printf("enter a number: ");
	scanf("%d", &amp;n);
	printf("enter a string: ");
	gets(str);
	printf("you typed %d and \"%s\"\n", n, str);
</PRE>but the compiler seems to be skipping the call to <TT>gets()</TT>! =

<P></P>
<P><A href=3D"http://c-faq.com/stdio/scanfc.html" =
rel=3Dsubdocument>12.18b</A> I'm=20
using <TT>scanf&nbsp;%c</TT> to read a Y/N response, but later input =
gets=20
skipped. </P>
<P><A href=3D"http://c-faq.com/stdio/scanfjam.html" =
rel=3Dsubdocument>12.19</A> I=20
figured I could use <TT>scanf</TT> more safely if I checked its return =
value to=20
make sure that the user typed the numeric values I expect: <PRE>	int n;

	while(1) {
		printf("enter a number: ");
		if(scanf("%d", &amp;n) =3D=3D 1)
			break;
		printf("try again: ");
	}

	printf("you typed %d\n", n);
</PRE>but sometimes it seems to go into an infinite loop. <A=20
href=3D"http://c-faq.com/achtung.html" rel=3Dsubdocument>[footnote]</A> =
Why?=20
<P></P>
<P><A href=3D"http://c-faq.com/stdio/scanfprobs.html" =
rel=3Dsubdocument>12.20</A>=20
Why does everyone say not to use <TT>scanf</TT>? What should I use =
instead? </P>
<P><A href=3D"http://c-faq.com/stdio/sprintfsize.html" =
rel=3Dsubdocument>12.21</A>=20
How can I tell how much destination buffer space I'll need for an =
arbitrary=20
<TT>sprintf</TT> call? How can I avoid overflowing the destination =
buffer with=20
<TT>sprintf</TT>? </P>
<P><A href=3D"http://c-faq.com/stdio/sprintfret.html" =
rel=3Dsubdocument>12.22</A>=20
What's the deal on <TT>sprintf</TT>'s return value? Is it an =
<TT>int</TT> or a=20
<TT>char&nbsp;*</TT>? </P>
<P><A href=3D"http://c-faq.com/stdio/getsvsfgets.html" =
rel=3Dsubdocument>12.23</A>=20
Why does everyone say not to use <TT>gets()</TT>? </P>
<P><A href=3D"http://c-faq.com/stdio/printferrno.html" =
rel=3Dsubdocument>12.24</A> I=20
thought I'd check <TT>errno</TT> after a long string of <TT>printf</TT> =
calls,=20
to see if any of them had failed: <PRE>	errno =3D 0;
	printf("This\n");
	printf("is\n");
	printf("a\n");
	printf("test.\n");
	if(errno !=3D 0)
		fprintf(stderr, "printf failed: %s\n", strerror(errno));
</PRE>Why is it printing something strange like ``printf failed: Not a=20
typewriter'' when I redirect the output to a file?=20
<P></P>
<P><A href=3D"http://c-faq.com/stdio/fgetpos.html" =
rel=3Dsubdocument>12.25</A>=20
What's the difference between <TT>fgetpos</TT>/<TT>fsetpos</TT> and=20
<TT>ftell</TT>/<TT>fseek</TT>? <BR>What are <TT>fgetpos</TT> and=20
<TT>fsetpos</TT> good for? </P>
<P><A href=3D"http://c-faq.com/stdio/stdinflush.html" =
rel=3Dsubdocument>12.26a</A>=20
How can I flush pending input so that a user's typeahead isn't read at =
the next=20
prompt? Will <TT>fflush(stdin)</TT> work? </P>
<P><A href=3D"http://c-faq.com/stdio/stdinflush2.html" =
rel=3Dsubdocument>12.26b</A>=20
If <TT>fflush</TT> won't work, what can I use to flush input? </P>
<P><A href=3D"http://c-faq.com/stdio/fopenfp.html" =
rel=3Dsubdocument>12.27</A> I=20
wrote this routine which is supposed to open a file: <PRE>	myfopen(char =
*filename, FILE *fp)
	{
		fp =3D fopen(filename, "r");
	}
</PRE>But when I call it like this: <PRE>		FILE *infp;
		myfopen("filename.dat", infp);
</PRE>the <TT>infp</TT> variable in the caller doesn't get set properly. =

<P></P>
<P><A href=3D"http://c-faq.com/stdio/fopenmodec.html" =
rel=3Dsubdocument>12.28</A> I=20
can't even get a simple <TT>fopen</TT> call to work! What's wrong with =
this=20
call? <PRE>	FILE *fp =3D fopen(filename, 'r');
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/stdio/constrpath.html" =
rel=3Dsubdocument>12.28b</A>=20
How can I open files with names like ``<TT>file1</TT>'', =
``<TT>file2</TT>'',=20
``<TT>file3</TT>'', etc., where the numeric part is controlled by a =
variable?=20
Basically I want ``<TT>file%d</TT>'', like <TT>printf</TT>. </P>
<P><A href=3D"http://c-faq.com/stdio/fopenpath.html" =
rel=3Dsubdocument>12.29</A>=20
<TT>fopen</TT> is failing for certain pathnames. </P>
<P><A href=3D"http://c-faq.com/stdio/fupdate.html" =
rel=3Dsubdocument>12.30</A> I'm=20
trying to update a file in place, by using <TT>fopen</TT> mode =
<TT>"r+"</TT>,=20
reading a certain string, and writing back a modified string, but it's =
not=20
working. </P>
<P><A href=3D"http://c-faq.com/stdio/insdelrec.html" =
rel=3Dsubdocument>12.31</A> How=20
can I insert or delete a line (or record) in the middle of a file? </P>
<P><A href=3D"http://c-faq.com/stdio/fdfilename.html" =
rel=3Dsubdocument>12.32</A>=20
How can I recover the file name given an open stream? </P>
<P><A href=3D"http://c-faq.com/stdio/freopen.html" =
rel=3Dsubdocument>12.33</A> How=20
can I redirect <TT>stdin</TT> or <TT>stdout</TT> to a file from within a =

program? </P>
<P><A href=3D"http://c-faq.com/stdio/undofreopen.html" =
rel=3Dsubdocument>12.34</A>=20
Once I've used <TT>freopen</TT>, how can I get the original =
<TT>stdout</TT> (or=20
<TT>stdin</TT>) back? </P>
<P><A href=3D"http://c-faq.com/stdio/redirp.html" =
rel=3Dsubdocument>12.35</A> How=20
can I tell if standard input or output is redirected (i.e. whether=20
``<TT>&lt;</TT>'' or ``<TT>&gt;</TT>'' was used on the invocation =
command line)?=20
</P>
<P><A href=3D"http://c-faq.com/stdio/devtty.html" =
rel=3Dsubdocument>12.36</A> I'm=20
trying to write a program like ``<TT>more</TT>.'' How can I get back to =
the=20
interactive keyboard if <TT>stdin</TT> is redirected? </P>
<P><A href=3D"http://c-faq.com/stdio/multiway.html" =
rel=3Dsubdocument>12.36b</A> How=20
can I arrange to have output go two places at once, e.g. to the screen =
and to a=20
file? </P>
<P><A href=3D"http://c-faq.com/stdio/binaryio.html" =
rel=3Dsubdocument>12.37</A> I=20
want to read and write numbers between files and memory in a =
byte-at-a-time way,=20
not as formatted characters the way <TT>fprintf</TT> and <TT>fscanf</TT> =
do. How=20
can I do this? </P>
<P><A href=3D"http://c-faq.com/stdio/fopenbinary.html" =
rel=3Dsubdocument>12.38</A>=20
How can I read a binary data file properly? I'm occasionally seeing=20
<TT>0x0a</TT> and <TT>0x0d</TT> values getting garbled, and I seem to =
hit EOF=20
prematurely if the data contains the value <TT>0x1a</TT>. </P>
<P><A href=3D"http://c-faq.com/stdio/stdinbinary.html" =
rel=3Dsubdocument>12.39</A>=20
I'm writing a ``filter'' for binary files, but <TT>stdin</TT> and=20
<TT>stdout</TT> are preopened as text streams. How can I change their =
mode to=20
binary? </P>
<P><A href=3D"http://c-faq.com/stdio/textvsbinary.html" =
rel=3Dsubdocument>12.40</A>=20
What's the difference between text and binary I/O? </P>
<P><A href=3D"http://c-faq.com/stdio/structio.html" =
rel=3Dsubdocument>12.41</A> How=20
can I read/write structures from/to data files? </P>
<P><A href=3D"http://c-faq.com/stdio/extconform.html" =
rel=3Dsubdocument>12.42</A>=20
How can I write code to conform to these old, binary data file formats? =
</P>
<P><A href=3D"http://c-faq.com/stdio/runtimesc2.html" =
rel=3Dsubdocument>12.43</A>=20
I'm reading strings typed by the user into an array, and then printing =
them out=20
later. When the user types a sequence like <TT>\n</TT>, why isn't it =
being=20
handled properly? </P>
<HR>

<H4>13. Library Functions</H4>
<P><A href=3D"http://c-faq.com/lib/itoa.html" rel=3Dsubdocument>13.1</A> =
How can I=20
convert numbers to strings (the opposite of <TT>atoi</TT>)? Is there an=20
<TT>itoa</TT> function? </P>
<P><A href=3D"http://c-faq.com/lib/strncpy.html" =
rel=3Dsubdocument>13.2</A> Why does=20
<TT>strncpy</TT> not always place a <TT>'\0'</TT> terminator in the =
destination=20
string? </P>
<P><A href=3D"http://c-faq.com/lib/substr.html" =
rel=3Dsubdocument>13.3</A> Does C=20
have anything like the ``substr'' (extract substring) routine present in =
other=20
languages? </P>
<P><A href=3D"http://c-faq.com/lib/strupper.html" =
rel=3Dsubdocument>13.4</A> How do=20
I convert a string to all upper or lower case? </P>
<P><A href=3D"http://c-faq.com/lib/toupper.html" =
rel=3Dsubdocument>13.5</A> Why do=20
some versions of <TT>toupper</TT> act strangely if given an upper-case =
letter?=20
<BR>Why does some code call <TT>islower</TT> before <TT>toupper</TT>? =
</P>
<P><A href=3D"http://c-faq.com/lib/strtok.html" =
rel=3Dsubdocument>13.6</A> How can I=20
split up a string into whitespace-separated fields? <BR>How can I =
duplicate the=20
process by which <TT>main()</TT> is handed <TT>argc</TT> and =
<TT>argv</TT>? </P>
<P><A href=3D"http://c-faq.com/lib/regex.html" =
rel=3Dsubdocument>13.7</A> I need=20
some code to do regular expression and wildcard matching. </P>
<P><A href=3D"http://c-faq.com/lib/qsort1.html" =
rel=3Dsubdocument>13.8</A> I'm=20
trying to sort an array of strings with <TT>qsort</TT>, using =
<TT>strcmp</TT> as=20
the comparison function, but it's not working. </P>
<P><A href=3D"http://c-faq.com/lib/qsort2.html" =
rel=3Dsubdocument>13.9</A> Now I'm=20
trying to sort an array of structures with <TT>qsort</TT>. My comparison =

function takes pointers to structures, but the compiler complains that =
the=20
function is of the wrong type for <TT>qsort</TT>. How can I cast the =
function=20
pointer to shut off the warning? </P>
<P><A href=3D"http://c-faq.com/lib/listsort.html" =
rel=3Dsubdocument>13.10</A> How=20
can I sort a linked list? </P>
<P><A href=3D"http://c-faq.com/lib/extsort.html" =
rel=3Dsubdocument>13.11</A> How can=20
I sort more data than will fit in memory? </P>
<P><A href=3D"http://c-faq.com/lib/curtime.html" =
rel=3Dsubdocument>13.12</A> How can=20
I get the current date or time of day in a C program? </P>
<P><A href=3D"http://c-faq.com/lib/mktime.html" =
rel=3Dsubdocument>13.13</A> I know=20
that the library function <TT>localtime</TT> will convert a =
<TT>time_t</TT> into=20
a broken-down <TT>struct&nbsp;tm</TT>, and that <TT>ctime</TT> will =
convert a=20
<TT>time_t</TT> to a printable string. How can I perform the inverse =
operations=20
of converting a <TT>struct&nbsp;tm</TT> or a string into a =
<TT>time_t</TT>? </P>
<P><A href=3D"http://c-faq.com/lib/calendar.html" =
rel=3Dsubdocument>13.14</A> How=20
can I add N days to a date? How can I find the difference between two =
dates?=20
</P>
<P><A href=3D"http://c-faq.com/lib/y2k.html" =
rel=3Dsubdocument>13.14b</A> Did C have=20
any Year 2000 problems? </P>
<P><A href=3D"http://c-faq.com/lib/rand.html" =
rel=3Dsubdocument>13.15</A> I need a=20
random number generator. </P>
<P><A href=3D"http://c-faq.com/lib/randrange.html" =
rel=3Dsubdocument>13.16</A> How=20
can I get random integers in a certain range? </P>
<P><A href=3D"http://c-faq.com/lib/srand.html" =
rel=3Dsubdocument>13.17</A> Each time=20
I run my program, I get the same sequence of numbers back from =
<TT>rand()</TT>.=20
</P>
<P><A href=3D"http://c-faq.com/lib/notveryrand.html" =
rel=3Dsubdocument>13.18</A> I=20
need a random true/false value, so I'm just taking=20
<TT>rand()&nbsp;%&nbsp;2</TT>, but it's alternating 0, 1, 0, 1, 0... =
</P>
<P><A href=3D"http://c-faq.com/lib/shuffle.html" =
rel=3Dsubdocument>13.19</A> How can=20
I return a sequence of random numbers which don't repeat at all? </P>
<P><A href=3D"http://c-faq.com/lib/fprand.html" =
rel=3Dsubdocument>13.19b</A> How can=20
I generate floating-point random numbers? </P>
<P><A href=3D"http://c-faq.com/lib/gaussian.html" =
rel=3Dsubdocument>13.20</A> How=20
can I generate random numbers with a normal or Gaussian distribution? =
</P>
<P><A href=3D"http://c-faq.com/lib/rand48.html" =
rel=3Dsubdocument>13.21</A> I'm=20
porting this program, and it calls a routine <TT>drand48</TT>, which my =
library=20
doesn't have. What is it? </P>
<P><A href=3D"http://c-faq.com/lib/exitvsreturn.html" =
rel=3Dsubdocument>13.22</A> Is=20
<TT>exit(status)</TT> truly equivalent to returning the same =
<TT>status</TT>=20
from <TT>main</TT>? </P>
<P><A href=3D"http://c-faq.com/lib/memmove.html" =
rel=3Dsubdocument>13.23</A> What's=20
the difference between <TT>memcpy</TT> and <TT>memmove</TT>? </P>
<P><A href=3D"http://c-faq.com/lib/oldlibfcns.html" =
rel=3Dsubdocument>13.24</A> I'm=20
trying to port this old program. Why do I get ``undefined external'' =
errors for=20
some library functions? </P>
<P><A href=3D"http://c-faq.com/lib/extlibs.html" =
rel=3Dsubdocument>13.25</A> I keep=20
getting errors due to library functions being undefined, but I'm =
#including all=20
the right header files. </P>
<P><A href=3D"http://c-faq.com/lib/libsearch.html" =
rel=3Dsubdocument>13.26</A> I'm=20
still getting errors due to library functions being undefined, even =
though I'm=20
explicitly requesting the right libraries while linking. </P>
<P><A href=3D"http://c-faq.com/lib/bloat.html" =
rel=3Dsubdocument>13.27</A> Why is my=20
simple program, which hardly does more than print ``Hello, world!'' in a =
window,=20
compiling to such a huge executable (several hundred K)? Should I=20
<TT>#include</TT> fewer header files? </P>
<P><A href=3D"http://c-faq.com/lib/endundef.html" =
rel=3Dsubdocument>13.28</A> What=20
does it mean when the linker says that <TT>_end</TT> is undefined? </P>
<P><A href=3D"http://c-faq.com/lib/noprintf.html" =
rel=3Dsubdocument>13.29</A> My=20
compiler is complaining that <TT>printf</TT> is undefined! How can this =
be? It's=20
the world's most popular C function... </P>
<HR>

<H4>14. Floating Point</H4>
<P><A href=3D"http://c-faq.com/fp/printfprec.html" =
rel=3Dsubdocument>14.1</A> When I=20
set a <TT>float</TT> variable to, say, 3.1, why is <TT>printf</TT> =
printing it=20
as 3.0999999? </P>
<P><A href=3D"http://c-faq.com/fp/fpdecl.html" =
rel=3Dsubdocument>14.2</A> I'm trying=20
to take some square roots, and I've simplified the code down to <PRE>	=
main()
	{
		printf("%f\n", sqrt(144.));
	}
</PRE>but I'm still getting crazy numbers.=20
<P></P>
<P><A href=3D"http://c-faq.com/fp/libm.html" rel=3Dsubdocument>14.3</A> =
I'm trying=20
to do some simple trig, and I am #including <TT>&lt;math.h&gt;</TT>, but =
the=20
linker keeps complaining that functions like <TT>sin</TT> and =
<TT>cos</TT> are=20
undefined. </P>
<P><A href=3D"http://c-faq.com/fp/strangefp.html" =
rel=3Dsubdocument>14.4a</A> My=20
floating-point calculations are acting strangely and giving me different =
answers=20
on different machines. </P>
<P><A href=3D"http://c-faq.com/fp/degrees.html" =
rel=3Dsubdocument>14.4b</A> I'm sure=20
I've got the trig functions declared correctly, but they're still giving =
me=20
wrong answers. </P>
<P><A href=3D"http://c-faq.com/fp/fpequal.html" =
rel=3Dsubdocument>14.5</A> What's a=20
good way to check for ``close enough'' floating-point equality? </P>
<P><A href=3D"http://c-faq.com/fp/round.html" rel=3Dsubdocument>14.6</A> =
How do I=20
round numbers? </P>
<P><A href=3D"http://c-faq.com/fp/pow.html" rel=3Dsubdocument>14.7</A> =
Why doesn't C=20
have an exponentiation operator? </P>
<P><A href=3D"http://c-faq.com/fp/mpi.html" rel=3Dsubdocument>14.8</A> =
The=20
predefined constant <TT>M_PI</TT> seems to be missing from my machine's =
copy of=20
<TT>&lt;math.h&gt;</TT>. </P>
<P><A href=3D"http://c-faq.com/fp/nan.html" rel=3Dsubdocument>14.9</A> =
How do I set=20
variables to, or test for IEEE NaN (``Not a Number'') and other special =
values?=20
</P>
<P><A href=3D"http://c-faq.com/fp/fpexcepts.html" =
rel=3Dsubdocument>14.10</A> How=20
can I handle floating-point exceptions gracefully? </P>
<P><A href=3D"http://c-faq.com/fp/complex.html" =
rel=3Dsubdocument>14.11</A> What's a=20
good way to implement complex numbers in C? </P>
<P><A href=3D"http://c-faq.com/fp/mathsrc.html" =
rel=3Dsubdocument>14.12</A> I'm=20
looking for some code to do: </P>
<P>Fast Fourier Transforms (FFT's) <BR>matrix arithmetic =
(multiplication,=20
inversion, etc.) <BR>complex arithmetic <BR></P>
<P><A href=3D"http://c-faq.com/fp/fpnotlinked.html" =
rel=3Dsubdocument>14.13</A> I'm=20
having trouble with a Turbo C program which crashes and says something =
like=20
``floating point formats not linked.'' </P>
<HR>

<H4>15. Variable-Length Argument Lists</H4>
<P><A href=3D"http://c-faq.com/varargs/protos.html" =
rel=3Dsubdocument>15.1</A> I=20
heard that you have to <TT>#include</TT> <TT>&lt;stdio.h&gt;</TT> before =
calling=20
<TT>printf</TT>. Why? </P>
<P><A href=3D"http://c-faq.com/varargs/promos.html" =
rel=3Dsubdocument>15.2</A> How=20
can <TT>%f</TT> be used for both <TT>float</TT> and <TT>double</TT> =
arguments in=20
<TT>printf</TT>? Aren't they different types? </P>
<P><A href=3D"http://c-faq.com/varargs/proto2.html" =
rel=3Dsubdocument>15.3</A> I had=20
a frustrating problem which turned out to be caused by the line <PRE>	=
printf("%d", n);
</PRE>where <TT>n</TT> was actually a <TT>long&nbsp;int</TT>. I thought =
that=20
ANSI function prototypes were supposed to guard against argument type =
mismatches=20
like this.=20
<P></P>
<P><A href=3D"http://c-faq.com/varargs/varargs1.html" =
rel=3Dsubdocument>15.4</A> How=20
can I write a function that takes a variable number of arguments? </P>
<P><A href=3D"http://c-faq.com/varargs/vprintf.html" =
rel=3Dsubdocument>15.5</A> How=20
can I write a function that takes a format string and a variable number =
of=20
arguments, like <TT>printf</TT>, and passes them to <TT>printf</TT> to =
do most=20
of the work? </P>
<P><A href=3D"http://c-faq.com/varargs/vscanf.html" =
rel=3Dsubdocument>15.6</A> How=20
can I write a function analogous to <TT>scanf</TT>, i.e. that accepts =
similar=20
arguments, and calls <TT>scanf</TT> to do most of the work? </P>
<P><A href=3D"http://c-faq.com/varargs/oldvarargs.html" =
rel=3Dsubdocument>15.7</A> I=20
have a pre-ANSI compiler, without <TT>&lt;stdarg.h&gt;</TT>. What can I =
do? </P>
<P><A href=3D"http://c-faq.com/varargs/nargs.html" =
rel=3Dsubdocument>15.8</A> How=20
can I discover how many arguments a function was actually called with? =
</P>
<P><A href=3D"http://c-faq.com/varargs/onefixedarg.html" =
rel=3Dsubdocument>15.9</A>=20
My compiler isn't letting me declare a function <PRE>	int f(...)
	{
	}
</PRE>i.e. accepting a variable number of arguments, but with no fixed =
arguments=20
at all.=20
<P></P>
<P><A href=3D"http://c-faq.com/varargs/float.html" =
rel=3Dsubdocument>15.10</A> I=20
have a varargs function which accepts a <TT>float</TT> parameter. Why =
isn't <PRE>va_arg(argp,&nbsp;float)</PRE>working?=20
<P></P>
<P><A href=3D"http://c-faq.com/varargs/funcptr.html" =
rel=3Dsubdocument>15.11</A> I=20
can't get <TT>va_arg</TT> to pull in an argument of type =
pointer-to-function.=20
</P>
<P><A href=3D"http://c-faq.com/varargs/handoff.html" =
rel=3Dsubdocument>15.12</A> How=20
can I write a function which takes a variable number of arguments and =
passes=20
them to some other function (which takes a variable number of =
arguments)? </P>
<P><A href=3D"http://c-faq.com/varargs/invvarargs.html" =
rel=3Dsubdocument>15.13</A>=20
How can I call a function with an argument list built up at run time? =
</P>
<HR>

<H4>16. Strange Problems</H4>
<P><A href=3D"http://c-faq.com/strangeprob/emptyloop.html"=20
rel=3Dsubdocument>16.1</A> Why is this loop always executing once? <PRE>	=
for(i =3D start; i &lt; end; i++);
		{
		printf("%d\n", i);
		}
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/strangeprob/unclosed.html"=20
rel=3Dsubdocument>16.1b</A> I'm getting baffling syntax errors which =
make no sense=20
at all, and it seems like large chunks of my program aren't being =
compiled. </P>
<P><A href=3D"http://c-faq.com/strangeprob/procedure.html"=20
rel=3Dsubdocument>16.1c</A> Why isn't my procedure call working? The =
compiler=20
seems to skip right over it. </P>
<P><A href=3D"http://c-faq.com/strangeprob/headerglom.html"=20
rel=3Dsubdocument>16.2</A> I'm getting strange syntax errors on the very =
first=20
declaration in a file, but it looks fine. </P>
<P><A href=3D"http://c-faq.com/strangeprob/biglocal.html" =
rel=3Dsubdocument>16.3</A>=20
This program crashes before it even runs! (When single-stepping with a =
debugger,=20
it dies before the first statement in <TT>main</TT>.) </P>
<P><A href=3D"http://c-faq.com/strangeprob/crashatexit.html"=20
rel=3Dsubdocument>16.4</A> I have a program that seems to run correctly, =
but it=20
crashes as it's exiting, <EM>after</EM> the last statement in =
<TT>main()</TT>.=20
What could be causing this? </P>
<P><A href=3D"http://c-faq.com/strangeprob/funnybugs.html"=20
rel=3Dsubdocument>16.5</A> This program runs perfectly on one machine, =
but I get=20
weird results on another. Stranger still, adding or removing a debugging =

printout changes the symptoms... </P>
<P><A href=3D"http://c-faq.com/strangeprob/strlitnomod.html"=20
rel=3Dsubdocument>16.6</A> Why does this code: =
<PRE>char&nbsp;*p&nbsp;=3D&nbsp;"hello,&nbsp;world!";
p[0]&nbsp;=3D&nbsp;'H';</PRE>crash?=20
<P></P>
<P><A href=3D"http://c-faq.com/strangeprob/ptralign.html" =
rel=3Dsubdocument>16.7</A>=20
</P>
<P>I've got some code that's trying to unpack external structures, but =
it's=20
crashing with a message about an ``unaligned access.'' What does this =
mean? The=20
code looks like this: <PRE>struct mystruct {
	char c;
	long int i32;
	int i16;
} s;

char buf[7], *p;
fread(buf, 7, 1, fp);
p =3D buf;
s.c =3D *p++;
s.i32 =3D *(long int *)p;
p +=3D 4;
s.i16 =3D *(int *)p;
</PRE>
<P></P>
<P><A href=3D"http://c-faq.com/strangeprob/segv.html" =
rel=3Dsubdocument>16.8</A>=20
What do ``Segmentation violation'', ``Bus error'', and ``General =
protection=20
fault'' mean? What's a ``core dump''? </P>
<HR>

<H4>17. Style</H4>
<P><A href=3D"http://c-faq.com/style/layout.html" =
rel=3Dsubdocument>17.1</A> What's=20
the best style for code layout in C? </P>
<P><A href=3D"http://c-faq.com/style/srcfiles.html" =
rel=3Dsubdocument>17.2</A> How=20
should functions be apportioned among source files? </P>
<P><A href=3D"http://c-faq.com/style/strcmp.html" =
rel=3Dsubdocument>17.3</A> Here's=20
a neat trick for checking whether two strings are equal: =
<PRE>if(!strcmp(s1, s2))</PRE>Is this good style?=20
<P></P>
<P><A href=3D"http://c-faq.com/style/revtest.html" =
rel=3Dsubdocument>17.4</A> Why do=20
some people write <TT>if(0&nbsp;=3D=3D&nbsp;x)</TT> instead of=20
<TT>if(x&nbsp;=3D=3D&nbsp;0)</TT>? </P>
<P><A href=3D"http://c-faq.com/style/protomacro.html" =
rel=3Dsubdocument>17.4b</A>=20
I've seen function declarations that look like this: <PRE>extern int =
func __((int, int));</PRE>What are those extra parentheses and=20
underscores for?=20
<P></P>
<P><A href=3D"http://c-faq.com/style/voidcasts.html" =
rel=3Dsubdocument>17.5</A> I=20
came across some code that puts a <TT>(void)</TT> cast before each call =
to=20
<TT>printf</TT>. Why? </P>
<P><A href=3D"http://c-faq.com/style/nullor0.html" =
rel=3Dsubdocument>17.6</A> If=20
<TT>NULL</TT> and <TT>0</TT> are equivalent as null pointer constants, =
which=20
should I use? </P>
<P><A href=3D"http://c-faq.com/style/bool.html" =
rel=3Dsubdocument>17.7</A> Should I=20
use symbolic names like <TT>TRUE</TT> and <TT>FALSE</TT> for Boolean =
constants,=20
or plain 1 and 0? </P>
<P><A href=3D"http://c-faq.com/style/hungarian.html" =
rel=3Dsubdocument>17.8</A> What=20
is ``Hungarian Notation''? Is it worthwhile? </P>
<P><A href=3D"http://c-faq.com/style/guides.html" =
rel=3Dsubdocument>17.9</A> Where=20
can I get the ``Indian Hill Style Guide'' and other coding standards? =
</P>
<P><A href=3D"http://c-faq.com/style/stylewars.html" =
rel=3Dsubdocument>17.10</A>=20
Some people say that <TT>goto</TT>'s are evil and that I should never =
use them.=20
Isn't that a bit extreme? </P>
<P><A href=3D"http://c-faq.com/style/vsefficiency.html" =
rel=3Dsubdocument>17.11</A>=20
People always say that good style is important, but when they go out of =
their=20
way to use clear techniques and make their programs readable, they seem =
to end=20
up with less efficient programs. Since efficiency is so important, isn't =
it=20
necessary to sacrifice some style and readability? </P>
<P><A href=3D"http://c-faq.com/style/charstarws2.html" =
rel=3Dsubdocument>17.12</A>=20
Which is correct, <PRE>char&nbsp;*p</PRE>or <PRE>char*&nbsp;p</PRE>?=20
<P></P>
<HR>

<H4>18. Tools and Resources</H4>
<P><A href=3D"http://c-faq.com/resources/tools.html" =
rel=3Dsubdocument>18.1</A> I=20
need some C development tools. </P>
<P><A href=3D"http://c-faq.com/resources/mallocdbg.html" =
rel=3Dsubdocument>18.2</A>=20
How can I track down these pesky malloc problems? </P>
<P><A href=3D"http://c-faq.com/resources/compilers.html" =
rel=3Dsubdocument>18.3</A>=20
What's a free or cheap C compiler I can use? </P>
<P><A href=3D"http://c-faq.com/resources/lint1.html" =
rel=3Dsubdocument>18.4</A> I=20
just typed in this program, and it's acting strangely. Can you see =
anything=20
wrong with it? </P>
<P><A href=3D"http://c-faq.com/resources/lintptralign.html"=20
rel=3Dsubdocument>18.5</A> How can I shut off the ``warning: possible =
pointer=20
alignment problem'' message which <TT>lint</TT> gives me for each call =
to=20
<TT>malloc</TT>? </P>
<P><A href=3D"http://c-faq.com/resources/voidmain.html" =
rel=3Dsubdocument>18.6</A>=20
Can I declare <TT>main</TT> as <TT>void</TT>, to shut off these annoying =
``main=20
returns no value'' messages? </P>
<P><A href=3D"http://c-faq.com/resources/ansilint.html" =
rel=3Dsubdocument>18.7</A>=20
Where can I get an ANSI-compatible <TT>lint</TT>? </P>
<P><A href=3D"http://c-faq.com/resources/lintvsansi.html" =
rel=3Dsubdocument>18.8</A>=20
Don't ANSI function prototypes render <TT>lint</TT> obsolete? </P>
<P><A href=3D"http://c-faq.com/resources/tutorials.html" =
rel=3Dsubdocument>18.9</A>=20
Are there any C tutorials or other resources on the net? </P>
<P><A href=3D"http://c-faq.com/resources/tutsources.html"=20
rel=3Dsubdocument>18.9b</A> Where can I find some good code examples to =
study and=20
learn from? </P>
<P><A href=3D"http://c-faq.com/resources/books.html" =
rel=3Dsubdocument>18.10</A>=20
What's a good book for learning C? What about advanced books and =
references?=20
</P>
<P><A href=3D"http://c-faq.com/resources/kranswers.html" =
rel=3Dsubdocument>18.11</A>=20
Where can I find answers to the exercises in K&amp;R? </P>
<P><A href=3D"http://c-faq.com/resources/booksrcs.html" =
rel=3Dsubdocument>18.12</A>=20
Does anyone know where the source code from books like <I>Numerical =
Recipes in=20
C</I>, Plauger's <I>The Standard C Library</I>, or Kernighan and Pike's =
<I>The=20
UNIX Programming Environment</I> is available on-line? </P>
<P><A href=3D"http://c-faq.com/resources/stdlibsrc.html" =
rel=3Dsubdocument>18.13</A>=20
Where can I find the sources of the standard C libraries? </P>
<P><A href=3D"http://c-faq.com/resources/onlinecref.html"=20
rel=3Dsubdocument>18.13b</A> Is there an on-line C reference manual? =
</P>
<P><A href=3D"http://c-faq.com/resources/ansiavail.html"=20
rel=3Dsubdocument>18.13c</A> Where can I get a copy of the ANSI/ISO C =
Standard?=20
</P>
<P><A href=3D"http://c-faq.com/resources/expreval.html" =
rel=3Dsubdocument>18.14</A>=20
I need code to parse and evaluate expressions. </P>
<P><A href=3D"http://c-faq.com/resources/grammars.html" =
rel=3Dsubdocument>18.15</A>=20
Where can I get a BNF or YACC grammar for C? </P>
<P><A href=3D"http://c-faq.com/resources/cctestsuite.html"=20
rel=3Dsubdocument>18.15b</A> Does anyone have a C compiler test suite I =
can use?=20
</P>
<P><A href=3D"http://c-faq.com/resources/miscsrcs.html" =
rel=3Dsubdocument>18.15c</A>=20
Where are some collections of useful code fragments and examples? </P>
<P><A href=3D"http://c-faq.com/resources/mplib.html" =
rel=3Dsubdocument>18.15d</A> I=20
need code for performing multiple precision arithmetic. </P>
<P><A href=3D"http://c-faq.com/resources/sources.html" =
rel=3Dsubdocument>18.16</A>=20
Where and how can I get copies of all these freely distributable =
programs? </P>
<P><A href=3D"http://c-faq.com/resources/faqavail.html" =
rel=3Dsubdocument>18.17</A>=20
Where can I get extra copies of this list? </P>
<HR>

<H4>19. System Dependencies</H4>
<P><A href=3D"http://c-faq.com/osdep/cbreak.html" =
rel=3Dsubdocument>19.1</A> How can=20
I read a single character from the keyboard without waiting for the =
RETURN key?=20
How can I stop characters from being echoed on the screen as they're =
typed? </P>
<P><A href=3D"http://c-faq.com/osdep/readavail.html" =
rel=3Dsubdocument>19.2</A> How=20
can I find out if there are characters available for reading (and if so, =
how=20
many)? Alternatively, how can I do a read that will not block if there =
are no=20
characters available? </P>
<P><A href=3D"http://c-faq.com/osdep/baton.html" =
rel=3Dsubdocument>19.3</A> How can=20
I display a percentage-done indication that updates itself in place, or =
show one=20
of those ``twirling baton'' progress indicators? </P>
<P><A href=3D"http://c-faq.com/osdep/termcap.html" =
rel=3Dsubdocument>19.4</A> How=20
can I clear the screen? <BR>How can I print text in color? <BR>How can I =
move=20
the cursor to a specific x,&nbsp;y position? </P>
<P><A href=3D"http://c-faq.com/osdep/waitforkey.html" =
rel=3Dsubdocument>19.4b</A>=20
I'm compiling some test programs on a windows-based system, and the =
windows=20
containing my program's output are closing so quickly after my program =
calls=20
<TT>exit</TT> that I can't see the output. How can I make it pause =
before=20
closing? </P>
<P><A href=3D"http://c-faq.com/osdep/specialkeys.html" =
rel=3Dsubdocument>19.5</A>=20
How do I read the arrow keys? What about function keys? </P>
<P><A href=3D"http://c-faq.com/osdep/mouse.html" =
rel=3Dsubdocument>19.6</A> How do I=20
read the mouse? </P>
<P><A href=3D"http://c-faq.com/osdep/serial.html" =
rel=3Dsubdocument>19.7</A> How can=20
I do serial (``comm'') port I/O? </P>
<P><A href=3D"http://c-faq.com/osdep/printer.html" =
rel=3Dsubdocument>19.8</A> How=20
can I direct output to the printer? </P>
<P><A href=3D"http://c-faq.com/osdep/escseqs.html" =
rel=3Dsubdocument>19.9</A> How do=20
I send escape sequences to control a terminal or other device? </P>
<P><A href=3D"http://c-faq.com/osdep/portio.html" =
rel=3Dsubdocument>19.9b</A> How=20
can I access an I/O board directly? </P>
<P><A href=3D"http://c-faq.com/osdep/graphics.html" =
rel=3Dsubdocument>19.10</A> How=20
can I do graphics? </P>
<P><A href=3D"http://c-faq.com/osdep/gifjpeg.html" =
rel=3Dsubdocument>19.10b</A> How=20
can I display GIF and JPEG images? </P>
<P><A href=3D"http://c-faq.com/osdep/fonts.html" =
rel=3Dsubdocument>19.10c</A> How=20
can I load new fonts for display? </P>
<P><A href=3D"http://c-faq.com/osdep/sendmail.html" =
rel=3Dsubdocument>19.10d</A> How=20
can I send mail from within a C program? </P>
<P><A href=3D"http://c-faq.com/osdep/fileexists.html" =
rel=3Dsubdocument>19.11</A>=20
How can I check whether a file exists? I want to warn the user if a =
requested=20
input file is missing. </P>
<P><A href=3D"http://c-faq.com/osdep/filesize.html" =
rel=3Dsubdocument>19.12</A> How=20
can I find out the size of a file, prior to reading it in? </P>
<P><A href=3D"http://c-faq.com/osdep/modtime.html" =
rel=3Dsubdocument>19.12b</A> How=20
can I find the modification date and time of a file? </P>
<P><A href=3D"http://c-faq.com/osdep/ftruncate.html" =
rel=3Dsubdocument>19.13</A> How=20
can a file be shortened in-place without completely clearing or =
rewriting it?=20
</P>
<P><A href=3D"http://c-faq.com/osdep/insdelrec.html" =
rel=3Dsubdocument>19.14</A> How=20
can I insert or delete a line (or record) in the middle of a file? </P>
<P><A href=3D"http://c-faq.com/osdep/fdfilename.html" =
rel=3Dsubdocument>19.15</A>=20
How can I recover the file name given an open stream or file descriptor? =
</P>
<P><A href=3D"http://c-faq.com/osdep/delete.html" =
rel=3Dsubdocument>19.16</A> How=20
can I delete a file? </P>
<P><A href=3D"http://c-faq.com/osdep/copy.html" =
rel=3Dsubdocument>19.16b</A> How do=20
I copy files? </P>
<P><A href=3D"http://c-faq.com/osdep/dospath.html" =
rel=3Dsubdocument>19.17</A> Why=20
can't I open a file by its explicit path? The call =
<PRE>fopen("c:\newdir\file.dat",&nbsp;"r")</PRE>is failing.=20
<P></P>
<P><A href=3D"http://c-faq.com/osdep/fopenenv.html" =
rel=3Dsubdocument>19.17b</A>=20
<TT>fopen</TT> isn't letting me open files like =
<TT>"$HOME/.profile"</TT> and=20
<TT>"~/.myrcfile"</TT>. </P>
<P><A href=3D"http://c-faq.com/osdep/abrtretrign.html" =
rel=3Dsubdocument>19.17c</A>=20
How can I suppress the dreaded MS-DOS ``Abort, Retry, Ignore?'' message? =
</P>
<P><A href=3D"http://c-faq.com/osdep/nfile.html" =
rel=3Dsubdocument>19.18</A> I'm=20
getting an error, ``Too many open files''. How can I increase the =
allowable=20
number of simultaneously open files? </P>
<P><A href=3D"http://c-faq.com/osdep/diskfree.html" =
rel=3Dsubdocument>19.19</A> How=20
can I find out how much free space is available on disk? </P>
<P><A href=3D"http://c-faq.com/osdep/readdir.html" =
rel=3Dsubdocument>19.20</A> How=20
can I read a directory in a C program? </P>
<P><A href=3D"http://c-faq.com/osdep/mkdir.html" =
rel=3Dsubdocument>19.21</A> How do=20
I create a directory? <BR>How do I remove a directory (and its =
contents)? </P>
<P><A href=3D"http://c-faq.com/osdep/memavail.html" =
rel=3Dsubdocument>19.22</A> How=20
can I find out how much memory is available? </P>
<P><A href=3D"http://c-faq.com/osdep/bigdatastr.html" =
rel=3Dsubdocument>19.23</A>=20
How can I allocate arrays or structures bigger than 64K? </P>
<P><A href=3D"http://c-faq.com/osdep/dgroup.html" =
rel=3Dsubdocument>19.24</A> What=20
does the error message ``DGROUP data allocation exceeds 64K'' mean, and =
what can=20
I do about it? I thought that using large model meant that I could use =
more than=20
64K of data! </P>
<P><A href=3D"http://c-faq.com/osdep/rawmemadr.html" =
rel=3Dsubdocument>19.25</A> How=20
can I access memory (a memory-mapped device, or graphics memory) located =
at a=20
certain address? <BR>How can I do PEEK and POKE in C? </P>
<P><A href=3D"http://c-faq.com/osdep/endiantest.html" =
rel=3Dsubdocument>19.25b</A>=20
How can I determine whether a machine's byte order is big-endian or=20
little-endian? </P>
<P><A href=3D"http://c-faq.com/osdep/accessloc0.html" =
rel=3Dsubdocument>19.26</A>=20
How can I access an interrupt vector located at the machine's location =
0? If I=20
set a pointer to <TT>0</TT>, the compiler might translate it to some =
nonzero=20
internal null pointer value. </P>
<P><A href=3D"http://c-faq.com/osdep/system.html" =
rel=3Dsubdocument>19.27</A> How=20
can I invoke another program (a standalone executable, or an operating =
system=20
command) from within a C program? </P>
<P><A href=3D"http://c-faq.com/osdep/system2.html" =
rel=3Dsubdocument>19.28</A> How=20
can I call <TT>system</TT> when parameters (filenames, etc.) of the =
executed=20
command aren't known until run time? </P>
<P><A href=3D"http://c-faq.com/osdep/systemret.html" =
rel=3Dsubdocument>19.29</A> How=20
do I get an accurate error status return from <TT>system</TT> on MS-DOS? =
</P>
<P><A href=3D"http://c-faq.com/osdep/popen.html" =
rel=3Dsubdocument>19.30</A> How can=20
I invoke another program or command and trap its output? </P>
<P><A href=3D"http://c-faq.com/osdep/exepath.html" =
rel=3Dsubdocument>19.31</A> How=20
can my program discover the complete pathname to the executable from =
which it=20
was invoked? </P>
<P><A href=3D"http://c-faq.com/osdep/auxfiles.html" =
rel=3Dsubdocument>19.32</A> How=20
can I automatically locate a program's configuration files in the same =
directory=20
as the executable? </P>
<P><A href=3D"http://c-faq.com/osdep/setenv.html" =
rel=3Dsubdocument>19.33</A> How=20
can a process change an environment variable in its caller? </P>
<P><A href=3D"http://c-faq.com/osdep/argv.html" =
rel=3Dsubdocument>19.34</A> How can=20
I open files mentioned on the command line, and parse option flags? </P>
<P><A href=3D"http://c-faq.com/osdep/exitvsreturn.html" =
rel=3Dsubdocument>19.35</A>=20
Is <TT>exit(status)</TT> truly equivalent to returning the same =
<TT>status</TT>=20
from <TT>main</TT>? </P>
<P><A href=3D"http://c-faq.com/osdep/dynlink.html" =
rel=3Dsubdocument>19.36</A> How=20
can I read in an object file and jump to locations in it? </P>
<P><A href=3D"http://c-faq.com/osdep/subsecond.html" =
rel=3Dsubdocument>19.37</A> How=20
can I implement a delay, or time a user's response, with sub-second =
resolution?=20
</P>
<P><A href=3D"http://c-faq.com/osdep/sigint.html" =
rel=3Dsubdocument>19.38</A> How=20
can I trap or ignore keyboard interrupts like control-C? </P>
<P><A href=3D"http://c-faq.com/osdep/fpexcepts.html" =
rel=3Dsubdocument>19.39</A> How=20
can I handle floating-point exceptions gracefully? </P>
<P><A href=3D"http://c-faq.com/osdep/intovf2.html" =
rel=3Dsubdocument>19.39b</A> How=20
can I ensure that integer arithmetic doesn't overflow? </P>
<P><A href=3D"http://c-faq.com/osdep/networking.html" =
rel=3Dsubdocument>19.40</A>=20
How do I... Use sockets? Do networking? Write client/server =
applications? </P>
<P><A href=3D"http://c-faq.com/osdep/xobjfiles.html" =
rel=3Dsubdocument>19.40a</A>=20
Can I combine .OBJ and .LIB files from Microsoft C and Turbo C? </P>
<P><A href=3D"http://c-faq.com/osdep/tsr.html" =
rel=3Dsubdocument>19.40b</A> How do=20
I... Use BIOS calls? Write ISR's? Create TSR's? </P>
<P><A href=3D"http://c-faq.com/osdep/int86.html" =
rel=3Dsubdocument>19.40c</A> I'm=20
trying to compile this program, but the compiler is complaining that=20
``<TT>union&nbsp;REGS</TT>'' is undefined, and the linker is complaining =
that=20
<TT>int86</TT> is undefined. </P>
<P><A href=3D"http://c-faq.com/osdep/nearfar.html" =
rel=3Dsubdocument>19.40d</A> What=20
are ``near'' and ``far'' pointers? </P>
<P><A href=3D"http://c-faq.com/osdep/gottabe.html" =
rel=3Dsubdocument>19.41</A> But I=20
can't use all these nonstandard, system-dependent functions, because my =
program=20
has to be ANSI compatible! </P>
<P><A href=3D"http://c-faq.com/osdep/sysdep.html" =
rel=3Dsubdocument>19.42</A> Why=20
isn't any of this standardized in C? Any real program has to do some of =
these=20
things. </P>
<HR>

<H4>20. Miscellaneous</H4>
<P><A href=3D"http://c-faq.com/misc/multretval.html" =
rel=3Dsubdocument>20.1</A> How=20
can I return multiple values from a function? </P>
<P><A href=3D"http://c-faq.com/misc/ragged.html" =
rel=3Dsubdocument>20.2</A> What's a=20
good data structure to use for storing lines of text? I started to use=20
fixed-size arrays of arrays of <TT>char</TT>, but they're just too =
restrictive.=20
</P>
<P><A href=3D"http://c-faq.com/misc/argv.html" =
rel=3Dsubdocument>20.3</A> How can I=20
open files mentioned on the command line, and parse option flags? </P>
<P><A href=3D"http://c-faq.com/misc/errno.html" =
rel=3Dsubdocument>20.4</A> What's=20
the right way to use <TT>errno</TT>? </P>
<P><A href=3D"http://c-faq.com/misc/binaryfiles.html" =
rel=3Dsubdocument>20.5</A> How=20
can I write data files which can be read on other machines with =
different word=20
size, byte order, or floating point formats? </P>
<P><A href=3D"http://c-faq.com/misc/symtab.html" =
rel=3Dsubdocument>20.6</A> If I=20
have a <TT>char&nbsp;*</TT> variable pointing to the name of a function, =
how can=20
I call that function? Code like <PRE>	extern int func(int, int);
	char *funcname =3D "func";
	int r =3D (*funcname)(1, 2);
</PRE>or <PRE>	r =3D (*(int (*)(int, int))funcname)(1, 2);
</PRE>doesn't seem to work.=20
<P></P>
<P><A href=3D"http://c-faq.com/misc/intovf.html" =
rel=3Dsubdocument>20.6b</A> How can=20
I ensure that integer arithmetic doesn't overflow? </P>
<P><A href=3D"http://c-faq.com/misc/bitmanip.html" =
rel=3Dsubdocument>20.7</A> How=20
can I manipulate individual bits? </P>
<P><A href=3D"http://c-faq.com/misc/bitsets.html" =
rel=3Dsubdocument>20.8</A> How can=20
I implement sets or arrays of bits? </P>
<P><A href=3D"http://c-faq.com/misc/endiantest.html" =
rel=3Dsubdocument>20.9</A> How=20
can I determine whether a machine's byte order is big-endian or =
little-endian?=20
</P>
<P><A href=3D"http://c-faq.com/misc/byteswap.html" =
rel=3Dsubdocument>20.9b</A> How=20
do I swap bytes? </P>
<P><A href=3D"http://c-faq.com/misc/hexio.html" =
rel=3Dsubdocument>20.10</A> How can=20
I convert integers to binary or hexadecimal? </P>
<P><A href=3D"http://c-faq.com/misc/base2.html" =
rel=3Dsubdocument>20.11</A> Can I=20
use base-2 constants (something like <TT>0b101010</TT>)? <BR>Is there a=20
<TT>printf</TT> format for binary? </P>
<P><A href=3D"http://c-faq.com/misc/bitcount.html" =
rel=3Dsubdocument>20.12</A> What=20
is the most efficient way to count the number of bits which are set in =
an=20
integer? </P>
<P><A href=3D"http://c-faq.com/misc/efficiency.html" =
rel=3Dsubdocument>20.13</A>=20
What's the best way of making my program efficient? </P>
<P><A href=3D"http://c-faq.com/misc/eff2.html" =
rel=3Dsubdocument>20.14</A> Are=20
pointers really faster than arrays? How much do function calls slow =
things down?=20
Is <TT>++i</TT> faster than <TT>i&nbsp;=3D&nbsp;i&nbsp;+&nbsp;1</TT>? =
</P>
<P><A href=3D"http://c-faq.com/misc/shifts.html" =
rel=3Dsubdocument>20.15</A> I've=20
been replacing multiplications and divisions with shift operators, =
because=20
shifting is more efficient. </P>
<P><A href=3D"http://c-faq.com/misc/unsshift.html" =
rel=3Dsubdocument>20.15b</A>=20
People claim that optimizing compilers are good and that we no longer =
have to=20
write things in assembler for speed, but my compiler can't even replace=20
<TT>i/=3D2</TT> with a shift. </P>
<P><A href=3D"http://c-faq.com/misc/swapnotemp.html" =
rel=3Dsubdocument>20.15c</A>=20
How can I swap two values without using a temporary? </P>
<P><A href=3D"http://c-faq.com/misc/switchimpl.html" =
rel=3Dsubdocument>20.16</A>=20
Which is more efficient, a <TT>switch</TT> statement or an=20
<TT>if</TT>/<TT>else</TT> chain? </P>
<P><A href=3D"http://c-faq.com/misc/strswitch.html" =
rel=3Dsubdocument>20.17</A> Is=20
there a way to <TT>switch</TT> on strings? </P>
<P><A href=3D"http://c-faq.com/misc/nonconstcase.html" =
rel=3Dsubdocument>20.18</A>=20
Is there a way to have non-constant <TT>case</TT> labels (i.e. ranges or =

arbitrary expressions)? </P>
<P><A href=3D"http://c-faq.com/misc/returnparens.html" =
rel=3Dsubdocument>20.19</A>=20
Are the outer parentheses in <TT>return</TT> statements really optional? =
</P>
<P><A href=3D"http://c-faq.com/misc/nestcomment.html" =
rel=3Dsubdocument>20.20</A>=20
Why don't C comments nest? How am I supposed to comment out code =
containing=20
comments? Are comments legal inside quoted strings? </P>
<P><A href=3D"http://c-faq.com/misc/multibreak.html" =
rel=3Dsubdocument>20.20b</A>=20
Why isn't there a numbered, multi-level <TT>break</TT> statement to =
break out of=20
several loops at once? What am I supposed to use instead, a =
<TT>goto</TT>? </P>
<P><A href=3D"http://c-faq.com/misc/funkyasgnop.html" =
rel=3Dsubdocument>20.21</A>=20
There seem to be a few missing operators, like <TT>^^</TT>,=20
<TT>&amp;&amp;=3D</TT>, and <TT>-&gt;=3D</TT>. </P>
<P><A href=3D"http://c-faq.com/misc/circshift.html" =
rel=3Dsubdocument>20.21a</A>=20
Does C have circular shift operators? </P>
<P><A href=3D"http://c-faq.com/misc/quintplus.html" =
rel=3Dsubdocument>20.21b</A> Is=20
C a great language, or what? Where else could you write something like=20
<TT>a+++++b</TT> ? </P>
<P><A href=3D"http://c-faq.com/misc/colonequal.html" =
rel=3Dsubdocument>20.22</A> If=20
the assignment operator were <TT>:=3D</TT>, wouldn't it then be harder =
to=20
accidentally write things like <TT>if(a&nbsp;=3D&nbsp;b)</TT> ? </P>
<P><A href=3D"http://c-faq.com/misc/with.html" =
rel=3Dsubdocument>20.23</A> Does C=20
have an equivalent to Pascal's <TT>with</TT> statement? </P>
<P><A href=3D"http://c-faq.com/misc/nestfcns.html" =
rel=3Dsubdocument>20.24</A> Why=20
doesn't C have nested functions? </P>
<P><A href=3D"http://c-faq.com/misc/assert.html" =
rel=3Dsubdocument>20.24b</A> What=20
is <TT>assert()</TT> and when would I use it? </P>
<P><A href=3D"http://c-faq.com/misc/mixlang.html" =
rel=3Dsubdocument>20.25</A> How=20
can I call FORTRAN (C++, BASIC, Pascal, Ada, LISP) functions from C? =
(And vice=20
versa?) </P>
<P><A href=3D"http://c-faq.com/misc/langtran.html" =
rel=3Dsubdocument>20.26</A> Does=20
anyone know of a program for converting Pascal or FORTRAN (or LISP, Ada, =
awk,=20
``Old'' C, ...) to C? </P>
<P><A href=3D"http://c-faq.com/misc/cplusplus.html" =
rel=3Dsubdocument>20.27</A> Is=20
C++ a superset of C? What are the differences between C and C++? Can I =
use a C++=20
compiler to compile C code? </P>
<P><A href=3D"http://c-faq.com/misc/soundex.html" =
rel=3Dsubdocument>20.28</A> I need=20
a sort of an ``approximate'' strcmp routine, for comparing two strings =
for=20
close, but not necessarily exact, equality. </P>
<P><A href=3D"http://c-faq.com/misc/hash.html" =
rel=3Dsubdocument>20.29</A> What is=20
hashing? </P>
<P><A href=3D"http://c-faq.com/misc/gaussian.html" =
rel=3Dsubdocument>20.30</A> How=20
can I generate random numbers with a normal or Gaussian distribution? =
</P>
<P><A href=3D"http://c-faq.com/misc/zeller.html" =
rel=3Dsubdocument>20.31</A> How can=20
I find the day of the week given the date? </P>
<P><A href=3D"http://c-faq.com/misc/leapyear.html" =
rel=3Dsubdocument>20.32</A> Is=20
<TT>(year&nbsp;%&nbsp;4&nbsp;=3D=3D&nbsp;0)</TT> an accurate test for =
leap years?=20
(Was 2000 a leap year?) </P>
<P><A href=3D"http://c-faq.com/misc/leapsec.html" =
rel=3Dsubdocument>20.33</A> Why=20
can <TT>tm_sec</TT> in the <TT>tm</TT> structure range from 0 to 61, =
suggesting=20
that there can be 62 seconds in a minute? </P>
<P><A href=3D"http://c-faq.com/misc/quine.html" =
rel=3Dsubdocument>20.34</A> Here's a=20
good puzzle: how do you write a program which produces its own source =
code as=20
output? </P>
<P><A href=3D"http://c-faq.com/misc/duff.html" =
rel=3Dsubdocument>20.35</A> What is=20
``Duff's Device''? </P>
<P><A href=3D"http://c-faq.com/misc/ioccc.html" =
rel=3Dsubdocument>20.36</A> When=20
will the next International Obfuscated C Code Contest (IOCCC) be held? =
How do I=20
submit contest entries? Who won this year's IOCCC? How can I get a copy =
of the=20
current and previous winning entries? </P>
<P><A href=3D"http://c-faq.com/misc/entry.html" =
rel=3Dsubdocument>20.37</A> What was=20
the <TT>entry</TT> keyword mentioned in K&amp;R1? </P>
<P><A href=3D"http://c-faq.com/misc/nameofc.html" =
rel=3Dsubdocument>20.38</A> Where=20
does the name ``C'' come from, anyway? </P>
<P><A href=3D"http://c-faq.com/misc/pronounce.html" =
rel=3Dsubdocument>20.39</A> How=20
do you pronounce ``<TT>char</TT>''? What's that funny name for the=20
``<TT>#</TT>'' character? </P>
<P><A href=3D"http://c-faq.com/misc/lvalue.html" =
rel=3Dsubdocument>20.39b</A> What=20
do ``lvalue'' and ``rvalue'' mean? </P>
<P><A href=3D"http://c-faq.com/misc/faqavail.html" =
rel=3Dsubdocument>20.40</A> Where=20
can I get extra copies of this list? </P>
<HR>

<H4>Glossary</H4>
<HR>

<H4>Bibliography</H4>
<HR>

<H4>Acknowledgements</H4>
<HR>
<A href=3D"http://c-faq.com/index.html">top</A>=20
<P></P></BODY></HTML>

------=_NextPart_000_0000_01C663E5.10AE3230
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://c-faq.com/images/buttontop.gif

R0lGODdhHgAeAKEAAP///y8vMC8vt////ywAAAAAHgAeAAACY4SPqcvtGN4R0kQpcr0ue8kx3viE
yog6JoK2zWq0MgPL9rLaumLqfhLyCSET4dASMxqRlSYAlkiVHjNV5/ZqHHGiJfekpPDAYTGRVf6c
k2k1E9B2MeNVqHN8Bz0D/L7/DxhYAAA7

------=_NextPart_000_0000_01C663E5.10AE3230
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-Location: http://c-faq.com/images/buttonsrch.gif

R0lGODdhHgAeAKEAAP///y8vMC8vt////ywAAAAAHgAeAAACXISPqcvtGJ5U8Yl7ZWW4i7cpnueE
yDg25kEaLbW8LsasQCfSi+3g+3TSwYA333AiS/Bywp8keew1a0+jqprRYD9ay5RKnCzDkK3Y3JVm
QWg22f2+Bub0uv2ODxQAADs=

------=_NextPart_000_0000_01C663E5.10AE3230--
