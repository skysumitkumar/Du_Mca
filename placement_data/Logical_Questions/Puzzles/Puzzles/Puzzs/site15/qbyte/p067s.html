<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><title>Nick's Mathematical Puzzles: Solution 67</title>
<meta name="Description" content="Probability puzzle solution: Random number generator" />
<meta name="Keywords" content="probability,expected value,recurrence relation,harmonic sum,mathematical puzzle" /><link rel="stylesheet" href="puzz4.css" tppabs="http://www.qbyte.org/puzzles/puzz4.css" type="text/css" /><link rel="shortcut icon" href="javascript:if(confirm('http://www.qbyte.org/favicon.ico  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.qbyte.org/favicon.ico'" tppabs="http://www.qbyte.org/favicon.ico" /></head>
<body><div class="o">
<div class="m"><a href="#main"><img src="s.gif" tppabs="http://www.qbyte.org/puzzles/s.gif" alt="Skip to main content." height="1" width="1" /></a><ul><li>Puzzles: </li><li><a href="puzzle01.html" tppabs="http://www.qbyte.org/puzzles/puzzle01.html">1-10</a> </li><li><a href="puzzle02.html" tppabs="http://www.qbyte.org/puzzles/puzzle02.html">11-20</a> </li><li><a href="puzzle03.html" tppabs="http://www.qbyte.org/puzzles/puzzle03.html">21-30</a> </li><li><a href="puzzle04.html" tppabs="http://www.qbyte.org/puzzles/puzzle04.html">31-40</a> </li><li><a href="puzzle05.html" tppabs="http://www.qbyte.org/puzzles/puzzle05.html">41-50</a> </li><li><a href="puzzle06.html" tppabs="http://www.qbyte.org/puzzles/puzzle06.html">51-60</a> </li><li><a href="puzzle07.html" tppabs="http://www.qbyte.org/puzzles/puzzle07.html">61-70</a> </li><li><a href="puzzle08.html" tppabs="http://www.qbyte.org/puzzles/puzzle08.html">71-80</a> </li><li><a href="puzzle09.html" tppabs="http://www.qbyte.org/puzzles/puzzle09.html">81-90</a> </li><li><a href="puzzle10.html" tppabs="http://www.qbyte.org/puzzles/puzzle10.html">91-100</a> </li><li><a href="puzzle11.html" tppabs="http://www.qbyte.org/puzzles/puzzle11.html">101-110</a> </li><li><a href="puzzle12.html" tppabs="http://www.qbyte.org/puzzles/puzzle12.html">111-120</a> </li><li><a href="puzzle99.html" tppabs="http://www.qbyte.org/puzzles/puzzle99.html">Index</a> </li><li>| </li><li><a href="javascript:if(confirm('http://www.qbyte.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.qbyte.org/'" tppabs="http://www.qbyte.org/">Home</a> </li><li><a href="index.htm" tppabs="http://www.qbyte.org/puzzles/">About</a> </li><li><a href="accessibility.html" tppabs="http://www.qbyte.org/puzzles/accessibility.html">Accessibility</a></li></ul></div>
<h1 id="main">Solution to puzzle 67: Random number generator</h1>
<p>Let E(n) be the <a href="javascript:if(confirm('http://en.wikipedia.org/wiki/Expected_value  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://en.wikipedia.org/wiki/Expected_value'" tppabs="http://en.wikipedia.org/wiki/Expected_value">expected value</a> of the number of iterations by which the generator first outputs the number&nbsp;1, when the initial input parameter is equal to n.</p>
<h2>Establishing a recurrence relation</h2>
<p>Clearly E(1) = 1.</p>
<table><tr><td>For n &gt; 1, E(n)</td><td>= [E(1) + (1 + E(2)) + ... + (1 + E(n))] / n.&nbsp; (Consider n equally likely outcomes, following the first iteration.)</td></tr>
<tr><td>&nbsp;</td><td>= (n - 1 + E(1) + E(2) + ... + E(n)) / n.</td></tr></table>
(Notice that we have implicitly assumed that E(n) is finite, which is something that, <em>a priori</em>, we do not necessarily know.)
<p>Multiplying by n and rearranging, we have (n - 1)E(n) = (n - 1) + E(1) + ... + E(n-1).<br />
Therefore E(n) = 1 + (E(1) + ... + E(n-1)) / (n - 1).</p>
<h2>Proving a harmonic sum conjecture</h2>
<p>Though useful, this <a href="javascript:if(confirm('http://en.wikipedia.org/wiki/Recurrence  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://en.wikipedia.org/wiki/Recurrence'" tppabs="http://en.wikipedia.org/wiki/Recurrence">recurrence relation</a> does not provide an easy means for calculating or approximating E(n), for large values of n.<br />
However, calculating the first few values: E(1) = 1, E(2) = 2, E(3) = 5/2, E(4) = 17/6, E(5) = 37/12; we may conjecture that E(k+1)&nbsp;-&nbsp;E(k)&nbsp;=&nbsp;1/k.</p>
<table><tr><td>To prove this conjecture, consider E(k+1) - E(k)</td><td>= [E(1) + ... + E(k)] / k&nbsp; -&nbsp; [E(1) + ... + E(k-1)] / (k - 1).</td></tr><tr><td>&nbsp;</td><td>= E(k) / k&nbsp; -&nbsp; [E(1) + ... + E(k-1)] / k(k - 1).</td></tr><tr><td>&nbsp;</td><td>= E(k) / k&nbsp; -&nbsp; [E(k) - 1] / k.</td></tr><tr><td>&nbsp;</td><td>= 1/k.</td></tr></table>
<p>We can now derive an expression for E(n), for n &gt; 1, using the following <a href="javascript:if(confirm('http://mathworld.wolfram.com/TelescopingSum.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://mathworld.wolfram.com/TelescopingSum.html'" tppabs="http://mathworld.wolfram.com/TelescopingSum.html">telescoping sum</a>:</p><p class="i">E(1) = 1<br />
E(2) - E(1) = 1/1<br />
E(3) - E(2) = 1/2<br />
...<br />
E(n) - E(n-1) = 1/(n-1)</p>
<p>Adding, we have E(n) = 1 + (1/1 + ... + 1/(n-1)).</p>
<h2>Harmonic sum approximation</h2>
<p>Now we can obtain a very accurate approximation for E(10<sup>100</sup>).</p>
<p>It is known that, for large n, the harmonic sum, 1/1 + ... + 1/n, is asymptotically equal to ln n + <em>Y</em> + 1/2n, where <dfn>Y</dfn> = 0.5772156649... is the <a href="javascript:if(confirm('http://www.mathsoft.com/mathresources/constants/wellknown/article/0,,1976,00.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.mathsoft.com/mathresources/constants/wellknown/article/0,,1976,00.html'" tppabs="http://www.mathsoft.com/mathresources/constants/wellknown/article/0,,1976,00.html">Euler-Mascheroni Constant</a>.</p>
<p>Setting n = 10<sup>100</sup>, we obtain E(10<sup>100</sup>) <img src="approx.gif" tppabs="http://www.qbyte.org/puzzles/approx.gif" alt="is approximately equal to" width="11" height="9" /> 1 + (100 ln 10) + <em>Y</em> <img src="approx.gif" tppabs="http://www.qbyte.org/puzzles/approx.gif" alt="is approximately equal to" width="11" height="9" /> 231.8357.</p>
<p>Therefore, E(10<sup>100</sup>), the expected value of the number of iterations by which the generator first outputs the number&nbsp;1, equals&nbsp;232, to the nearest integer.</p>
<p class="c"><cite>Source: Original.&nbsp; See also <a href="puzzle04.html#p33" tppabs="http://www.qbyte.org/puzzles/puzzle04.html#p33">Harmonic Sum</a>.</cite></p>
<div id="n" class="m"><ul><li>Puzzles: </li><li><a href="puzzle01.html" tppabs="http://www.qbyte.org/puzzles/puzzle01.html">1-10</a> </li><li><a href="puzzle02.html" tppabs="http://www.qbyte.org/puzzles/puzzle02.html">11-20</a> </li><li><a href="puzzle03.html" tppabs="http://www.qbyte.org/puzzles/puzzle03.html">21-30</a> </li><li><a href="puzzle04.html" tppabs="http://www.qbyte.org/puzzles/puzzle04.html">31-40</a> </li><li><a href="puzzle05.html" tppabs="http://www.qbyte.org/puzzles/puzzle05.html">41-50</a> </li><li><a href="puzzle06.html" tppabs="http://www.qbyte.org/puzzles/puzzle06.html">51-60</a> </li><li><a href="puzzle07.html" tppabs="http://www.qbyte.org/puzzles/puzzle07.html">61-70</a> </li><li><a href="puzzle08.html" tppabs="http://www.qbyte.org/puzzles/puzzle08.html">71-80</a> </li><li><a href="puzzle09.html" tppabs="http://www.qbyte.org/puzzles/puzzle09.html">81-90</a> </li><li><a href="puzzle10.html" tppabs="http://www.qbyte.org/puzzles/puzzle10.html">91-100</a> </li><li><a href="puzzle11.html" tppabs="http://www.qbyte.org/puzzles/puzzle11.html">101-110</a> </li><li><a href="puzzle12.html" tppabs="http://www.qbyte.org/puzzles/puzzle12.html">111-120</a> </li><li><a href="puzzle99.html" tppabs="http://www.qbyte.org/puzzles/puzzle99.html">Index</a> </li><li>| </li><li><a href="javascript:if(confirm('http://www.qbyte.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.qbyte.org/'" tppabs="http://www.qbyte.org/">Home</a> </li><li><a href="index.htm" tppabs="http://www.qbyte.org/puzzles/">About</a> </li><li><a href="accessibility.html" tppabs="http://www.qbyte.org/puzzles/accessibility.html">Accessibility</a></li></ul></div></div></body></html>