<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><title>Nick's Mathematical Puzzles: Solution 26</title>
<meta name="Description" content="Probability puzzle solution: Two packs of cards" />
<meta name="Keywords" content="probability,derangement,inclusion-exclusion principle,permutation,Maclaurin series,cards,mathematical puzzle" /><link rel="stylesheet" href="puzz4.css" tppabs="http://www.qbyte.org/puzzles/puzz4.css" type="text/css" /><link rel="shortcut icon" href="javascript:if(confirm('http://www.qbyte.org/favicon.ico  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.qbyte.org/favicon.ico'" tppabs="http://www.qbyte.org/favicon.ico" /></head>
<body><div class="e">
<div class="m"><a href="#main"><img src="s.gif" tppabs="http://www.qbyte.org/puzzles/s.gif" alt="Skip to main content." height="1" width="1" /></a><ul><li>Puzzles: </li><li><a href="puzzle01.html" tppabs="http://www.qbyte.org/puzzles/puzzle01.html">1-10</a> </li><li><a href="puzzle02.html" tppabs="http://www.qbyte.org/puzzles/puzzle02.html">11-20</a> </li><li><a href="puzzle03.html" tppabs="http://www.qbyte.org/puzzles/puzzle03.html">21-30</a> </li><li><a href="puzzle04.html" tppabs="http://www.qbyte.org/puzzles/puzzle04.html">31-40</a> </li><li><a href="puzzle05.html" tppabs="http://www.qbyte.org/puzzles/puzzle05.html">41-50</a> </li><li><a href="puzzle06.html" tppabs="http://www.qbyte.org/puzzles/puzzle06.html">51-60</a> </li><li><a href="puzzle07.html" tppabs="http://www.qbyte.org/puzzles/puzzle07.html">61-70</a> </li><li><a href="puzzle08.html" tppabs="http://www.qbyte.org/puzzles/puzzle08.html">71-80</a> </li><li><a href="puzzle09.html" tppabs="http://www.qbyte.org/puzzles/puzzle09.html">81-90</a> </li><li><a href="puzzle10.html" tppabs="http://www.qbyte.org/puzzles/puzzle10.html">91-100</a> </li><li><a href="puzzle11.html" tppabs="http://www.qbyte.org/puzzles/puzzle11.html">101-110</a> </li><li><a href="puzzle12.html" tppabs="http://www.qbyte.org/puzzles/puzzle12.html">111-120</a> </li><li><a href="puzzle99.html" tppabs="http://www.qbyte.org/puzzles/puzzle99.html">Index</a> </li><li>| </li><li><a href="javascript:if(confirm('http://www.qbyte.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.qbyte.org/'" tppabs="http://www.qbyte.org/">Home</a> </li><li><a href="index.htm" tppabs="http://www.qbyte.org/puzzles/">About</a> </li><li><a href="accessibility.html" tppabs="http://www.qbyte.org/puzzles/accessibility.html">Accessibility</a></li></ul></div>
<h1 id="main">Solution to puzzle 26: Two packs of cards</h1>
<p>Players A and B each have a well shuffled standard pack of cards, with no jokers.&nbsp; The players deal their cards one at a time, from the top of the deck, checking for an exact match.&nbsp; Player A wins if, once the packs are fully dealt, no matches are found.&nbsp; Player B wins if at least one match occurs.&nbsp; What is the probability that player A wins?</p><hr />
<p>Since player A is dealing from a shuffled pack, the probability that A wins is independent of the order in which B's cards are dealt.&nbsp; So, without loss of generality, we can assume B's cards are dealt in order: 1, 2, 3, ... 52.&nbsp; Therefore the probability that player A wins is the fraction of permutations of (a<sub>1</sub>, a<sub>2</sub>, ... a<sub>52</sub>) for which a<sub>i</sub> <img src="ne.gif" tppabs="http://www.qbyte.org/puzzles/ne.gif" width="12" height="9" alt="not equal to" /> i, for all i from 1 to 52.&nbsp; Such permutations are known as <a href="javascript:if(confirm('http://mathworld.wolfram.com/Derangement.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://mathworld.wolfram.com/Derangement.html'" tppabs="http://mathworld.wolfram.com/Derangement.html">derangements</a>.</p>
<p>Let d(n) be the number of derangements of n elements.&nbsp; Then, by the <a href="javascript:if(confirm('http://mathworld.wolfram.com/Inclusion-ExclusionPrinciple.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://mathworld.wolfram.com/Inclusion-ExclusionPrinciple.html'" tppabs="http://mathworld.wolfram.com/Inclusion-ExclusionPrinciple.html">Inclusion-Exclusion Principle</a>,</p><table><tr><td>d(n) = </td><td>(total number of ways to deal n cards)</td></tr>
<tr><td>&nbsp;</td><td> - sum over i (number of deals for which a<sub>i</sub> = i)</td></tr><tr><td>&nbsp;</td><td> + sum over distinct i,j (number of deals for which a<sub>i</sub> = i and a<sub>j</sub> = j)</td></tr>
<tr><td>&nbsp;</td><td> - sum over distinct i,j,k (number of deals for which a<sub>i</sub> = i and a<sub>j</sub> = j and a<sub>k</sub> = k)</td></tr>
<tr><td>&nbsp;</td><td> &plusmn; number of ways in which a<sub>i</sub> = i, for all i from 1 to n</td></tr><tr><td>&nbsp;</td><td> (with the sign dependent on the parity of n)</td></tr></table>
<p>Here, we start with n! deals, subtract those with one matching card, then add back the number with two matching cards (we just counted these combinations twice), and so on.</p>
<table><tr><td>So d(n)</td><td> = n! - <sub>n</sub>C<sub>1</sub> &middot; (n-1)! + <sub>n</sub>C<sub>2</sub> &middot; (n-2)! + ... &plusmn;&nbsp; <sub>n</sub>C<sub>n</sub> &middot; (n-n)!</td></tr>
<tr><td>&nbsp;</td><td> = n! - n!/1! + n!/2! + ... &plusmn;&nbsp; (-1)<sup>n</sup></td></tr></table>
(where <dfn><sub>n</sub>C<sub>k</sub></dfn> is the <a href="javascript:if(confirm('http://mathworld.wolfram.com/Combination.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://mathworld.wolfram.com/Combination.html'" tppabs="http://mathworld.wolfram.com/Combination.html">number of ways of choosing k outcomes out of n possibilities, ignoring order</a>.)
<p>The probability that A wins is therefore d(52) / 52! = 1 - 1/1! + 1/2! - 1/3! + ... + 1/52!</p>
<p>Note that this is the first 53 terms of the <a href="javascript:if(confirm('http://mathworld.wolfram.com/MaclaurinSeries.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://mathworld.wolfram.com/MaclaurinSeries.html'" tppabs="http://mathworld.wolfram.com/MaclaurinSeries.html">Maclaurin series</a> for e<sup>-1</sup>.&nbsp; The series converges very rapidly to 1/e ; the above probability is within 1/53! of 1/e.&nbsp; Therefore, somewhat surprisingly, for any reasonably large number of cards, say, 10 or more, the probability that A wins is almost independent of the number of cards in the decks.</p>
<hr /><h2 class="h3">Further reading</h2>
<ol><li><img src="pdf.gif" tppabs="http://www.qbyte.org/puzzles/pdf.gif" width="34" height="20" alt="(Adobe) Portable Document Format" class="w" /> <a href="javascript:if(confirm('http://www.cs.uwaterloo.ca/journals/JIS/VOL6/Hassani/hassani5.pdf  \n\nThis file was not retrieved by Teleport Pro, because it did not meet the project\'s file type specifications.  \n\nDo you want to open it from the server?'))window.location='http://www.cs.uwaterloo.ca/journals/JIS/VOL6/Hassani/hassani5.pdf'" tppabs="http://www.cs.uwaterloo.ca/journals/JIS/VOL6/Hassani/hassani5.pdf">Derangements and Applications</a></li>
<li><a href="javascript:if(confirm('http://www.research.att.com/cgi-bin/access.cgi/as/njas/sequences/eisA.cgi?Anum=A000166  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.research.att.com/cgi-bin/access.cgi/as/njas/sequences/eisA.cgi?Anum=A000166'" tppabs="http://www.research.att.com/cgi-bin/access.cgi/as/njas/sequences/eisA.cgi?Anum=A000166">Online Encyclopedia of Integer Sequences: A000166</a></li></ol>
<p class="c"><cite>Source: Traditional</cite></p>
<div id="n" class="m"><ul><li>Puzzles: </li><li><a href="puzzle01.html" tppabs="http://www.qbyte.org/puzzles/puzzle01.html">1-10</a> </li><li><a href="puzzle02.html" tppabs="http://www.qbyte.org/puzzles/puzzle02.html">11-20</a> </li><li><a href="puzzle03.html" tppabs="http://www.qbyte.org/puzzles/puzzle03.html">21-30</a> </li><li><a href="puzzle04.html" tppabs="http://www.qbyte.org/puzzles/puzzle04.html">31-40</a> </li><li><a href="puzzle05.html" tppabs="http://www.qbyte.org/puzzles/puzzle05.html">41-50</a> </li><li><a href="puzzle06.html" tppabs="http://www.qbyte.org/puzzles/puzzle06.html">51-60</a> </li><li><a href="puzzle07.html" tppabs="http://www.qbyte.org/puzzles/puzzle07.html">61-70</a> </li><li><a href="puzzle08.html" tppabs="http://www.qbyte.org/puzzles/puzzle08.html">71-80</a> </li><li><a href="puzzle09.html" tppabs="http://www.qbyte.org/puzzles/puzzle09.html">81-90</a> </li><li><a href="puzzle10.html" tppabs="http://www.qbyte.org/puzzles/puzzle10.html">91-100</a> </li><li><a href="puzzle11.html" tppabs="http://www.qbyte.org/puzzles/puzzle11.html">101-110</a> </li><li><a href="puzzle12.html" tppabs="http://www.qbyte.org/puzzles/puzzle12.html">111-120</a> </li><li><a href="puzzle99.html" tppabs="http://www.qbyte.org/puzzles/puzzle99.html">Index</a> </li><li>| </li><li><a href="javascript:if(confirm('http://www.qbyte.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.qbyte.org/'" tppabs="http://www.qbyte.org/">Home</a> </li><li><a href="index.htm" tppabs="http://www.qbyte.org/puzzles/">About</a> </li><li><a href="accessibility.html" tppabs="http://www.qbyte.org/puzzles/accessibility.html">Accessibility</a></li></ul></div></div></body></html>